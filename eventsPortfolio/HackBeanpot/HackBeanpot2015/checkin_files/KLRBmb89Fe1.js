if (self.CavalryLogger) { CavalryLogger.start_js(["kwATM"]); }

__d('LiveVideoWWWBeeperTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LiveVideoWWWBeeperLoggerConfig',this.$LiveVideoWWWBeeperTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LiveVideoWWWBeeperLoggerConfig',this.$LiveVideoWWWBeeperTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$LiveVideoWWWBeeperTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LiveVideoWWWBeeperTypedLogger1=babelHelpers['extends']({},this.$LiveVideoWWWBeeperTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$LiveVideoWWWBeeperTypedLogger1.event=j;return this};h.prototype.setOwnerID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.owner_id=j;return this};h.prototype.setPersistDuration=function(j){this.$LiveVideoWWWBeeperTypedLogger1.persist_duration=j;return this};h.prototype.setSenderID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.sender_id=j;return this};h.prototype.setTimeToHide=function(j){this.$LiveVideoWWWBeeperTypedLogger1.time_to_hide=j;return this};h.prototype.setVC=function(j){this.$LiveVideoWWWBeeperTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.video_id=j;return this};var i={event:true,owner_id:true,persist_duration:true,sender_id:true,time_to_hide:true,vc:true,video_id:true};f.exports=h}),null);
__d('LiveVideoBeeperItemContentsImpl.react',['cx','ix','Animation','Arbiter','AsyncRequest','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','LiveVideoBroadcastStatusUpdateSubscriptionHack','LiveVideoWWWBeeperTypedLogger','NotificationBeeperItemCloseButton.react','NotificationURI','NotificationUserActions','NotificationUtils','React','ReactDOM','SubscriptionsHandler','TextWithEntities.react','Timestamp.react','URI','VideoBroadcastStatus','VideoComponentLiveAudioAnimation.react','VideoComponentLiveVideoIndicator.react','VideoDataContainer.react','VideoPermalinkURI','VideoPlayer.react','VideoPlayerLoggerSource','Visibility','XLiveVideoBroadcastStatusController','expectationViolation','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l='LiveVideoBeeperEvents/Mount',m={Mount:l};function n(p,q){return c('React').createElement('span',{className:'fwb'},p)}j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={subscriptionsHandler:new (c('SubscriptionsHandler'))()},this.$LiveVideoBeeperItemContentsImpl3=function(u){this.$LiveVideoBeeperItemContentsImpl2('click');this.$LiveVideoBeeperItemContentsImpl1();this.props.onHide();if(u.button===1||u.altKey||u.ctrlKey||u.metaKey||u.shiftKey)return;var v=this.props.beep,w=v.rendererData;if(c('NotificationURI').isAlbumDraftRecoveryDialogURI(v.link)){new (c('AsyncRequest'))(v.link).send();u.preventDefault()}else if(c('NotificationUtils').canRenderInStoryTray(w)){this.$LiveVideoBeeperItemContentsImpl4(u,w)}else if(c('NotificationUtils').canRenderInTahoe(w)){this.$LiveVideoBeeperItemContentsImpl5(w);u.preventDefault()}else if(w&&c('NotificationUtils').canRenderInVideoChannelView(w)){this.$LiveVideoBeeperItemContentsImpl6(w);u.preventDefault()}else if(v.photo&&c('NotificationURI').snowliftable(v.link)){u.persist();c('Bootloader').loadModules(["PhotoSnowlift"],function(x){x.bootstrap(v.link,u.currentTarget)},'LiveVideoBeeperItemContentsImpl.react');u.preventDefault()}else if(v.ajaxifyLink){c('Bootloader').loadModules(["AsyncDialog"],function(x){x.bootstrap(v.ajaxifyLink,u.currentTarget,'dialog')},'LiveVideoBeeperItemContentsImpl.react');u.preventDefault()}}.bind(this),this.$LiveVideoBeeperItemContentsImpl12=function(){this.$LiveVideoBeeperItemContentsImpl2('render_preview')}.bind(this),q}o.prototype.$LiveVideoBeeperItemContentsImpl1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID])};o.prototype.$LiveVideoBeeperItemContentsImpl2=function(event){var p=null;if(event!=='render'&&this.renderTimestamp)p=Date.now()-this.renderTimestamp;var q=this.props.beep.rendererData;if(q)new (c('LiveVideoWWWBeeperTypedLogger'))().setEvent(event).setOwnerID(q.owner_id).setVideoID(q.video_id).setSenderID(q.sender_id).setTimeToHide(q.time_to_hide).setPersistDuration(p).log();};o.prototype.$LiveVideoBeeperItemContentsImpl4=function(event,p){if(!c('NotificationUtils').canRenderInStoryTray(p)){c('expectationViolation')('rendererData was not valid for story view');return}event.preventDefault();c('Bootloader').loadModules(["FBStoriesLiveNotificationHandler"],function(q){q.renderLiveStory(p)},'LiveVideoBeeperItemContentsImpl.react')};o.prototype.$LiveVideoBeeperItemContentsImpl5=function(p){var q=this.props.beep.url;c('Bootloader').loadModules(["TahoeController"],function(r){var s=c('NotificationURI').localize(new (c('URI'))(q));r.openFromVideoLink(new (c('URI'))(s),p&&p.video_channel_id,p&&p.video_channel_caller)},'LiveVideoBeeperItemContentsImpl.react')};o.prototype.$LiveVideoBeeperItemContentsImpl6=function(p){c('Bootloader').loadModules(["VideoChannelHandleLink"],function(q){q.openChannel(p.video_channel_id,p.video_channel_caller,p.video_id)},'LiveVideoBeeperItemContentsImpl.react')};o.prototype.$LiveVideoBeeperItemContentsImpl7=function(event){this.$LiveVideoBeeperItemContentsImpl2(event);this.$LiveVideoBeeperItemContentsImpl1();this.props.onHide();this.state.subscriptionsHandler.release()};o.prototype.$LiveVideoBeeperItemContentsImpl8=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go()};o.prototype.$LiveVideoBeeperItemContentsImpl9=function(p){var q=c('XLiveVideoBroadcastStatusController').getURIBuilder().setFBID('video_id',p).getURI();new (c('AsyncRequest'))().setURI(q).setHandler(function(r){if(r.payload.broadcast_status!=c('VideoBroadcastStatus').LIVE)this.$LiveVideoBeeperItemContentsImpl7('broadcast_end');}.bind(this)).send()};o.prototype.componentWillMount=function(){c('Bootloader').loadModules(["VideoPlayerMetaData"],function(p){var q=this.$LiveVideoBeeperItemContentsImpl10();if(q)p.genVideoData(q);}.bind(this),'LiveVideoBeeperItemContentsImpl.react')};o.prototype.componentDidMount=function(){var p,q=this;this.$LiveVideoBeeperItemContentsImpl2('render');this.renderTimestamp=Date.now();c('Arbiter').inform(m.Mount);var r=this.props.beep.rendererData;if(r){var p=function(){var s=r.time_to_hide;if(s===0){q.props.onReadyToHide(q.props.beep.notificationID);return {v:void 0}}q.props.onPreventHide(q.props.beep.notificationID);if(s>0)c('setTimeoutAcrossTransitions')(function(){this.props.onReadyToHide(this.props.beep.notificationID)}.bind(q),s);var t=r.video_id;q.state.subscriptionsHandler.addSubscriptions(c('Arbiter').subscribe(m.Mount,function(){this.$LiveVideoBeeperItemContentsImpl7('replace')}.bind(q)),c('Visibility').addListener(c('Visibility').VISIBLE,function(){this.$LiveVideoBeeperItemContentsImpl9(t)}.bind(q)),c('LiveVideoBroadcastStatusUpdateSubscriptionHack').subscribe(t,function(u){var v=u.live_video_broadcast_status_update_subscribe,w=v.video_broadcast_status;if(w!==c('VideoBroadcastStatus').LIVE)this.$LiveVideoBeeperItemContentsImpl7('broadcast_end');}.bind(q)))}();if(typeof p==="object")return p.v;}else this.props.onReadyToHide(this.props.beep.notificationID);};o.prototype.$LiveVideoBeeperItemContentsImpl10=function(){var p=this.$LiveVideoBeeperItemContentsImpl11(),q=JSON.parse(p);return q.content_id};o.prototype.$LiveVideoBeeperItemContentsImpl11=function(){return this.props.beep.tracking||'{}'};o.prototype.componentWillUnmount=function(){this.state.subscriptionsHandler.release()};o.prototype.componentDidUpdate=function(p){if(p.beep.beepID!==this.props.beep.beepID){this.$LiveVideoBeeperItemContentsImpl8();this.props.onReadyToHide(this.props.beep.notificationID)}};o.prototype.render=function(){var p=new (c('URI').getRequestURI)();if(c('VideoPermalinkURI').isValid(p)){var q=c('VideoPermalinkURI').parse(p);if(q!=null&&this.props.beep.rendererData!=null&&q.video_id===this.props.beep.rendererData.video_id)return null;}var r=this.props.beep.rendererData?c('React').createElement('div',{className:"_3qez"},c('React').createElement(c('VideoDataContainer.react'),{videoID:this.props.beep.rendererData.video_id,onVideoLoaded:this.$LiveVideoBeeperItemContentsImpl12},c('React').createElement(c('VideoPlayer.react'),{autoplay:true,width:170,height:95,subOrigin:c('VideoPlayerLoggerSource').LIVE_BEEPER,startMuted:true,videoData:c('VideoDataContainer.react').VIDEO_DATA_PLACEHOLDER},c('React').createElement(c('VideoComponentLiveVideoIndicator.react'),{inBeeper:true}),c('React').createElement(c('VideoComponentLiveAudioAnimation.react'),null)))):null,s=this.props.beep,t=s.thumbnail?s.thumbnail.uri:i("97000");return c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:function(){return this.$LiveVideoBeeperItemContentsImpl7('close')}.bind(this)}),c('React').createElement('a',{href:s.link,onClick:this.$LiveVideoBeeperItemContentsImpl3,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:t,className:"_3sok"+(!t?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:n,ranges:s.text.ranges,aggregatedranges:s.text.aggregated_ranges,text:s.text.text}),r,c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t",src:i("82430")}),c('React').createElement(c('Timestamp.react'),{time:s.timestamp.time,text:s.timestamp.text,verbose:s.timestamp.verbose}))))))};f.exports=o}),null);