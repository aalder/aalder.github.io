if (self.CavalryLogger) { CavalryLogger.start_js(["8jkLW"]); }

__d("ComposerPublisherSupportedParameters",[],(function a(b,c,d,e,f,g){f.exports=["composer_entry_time","composer_session_duration","composer_session_id","composer_source_surface","composer_type","is_q_and_a","is_welcome_to_group_post","multilingual_specified_lang","multilingual_status_langs","multilingual_statuses","num_keystrokes","num_pastes","privacyx","ref","text_format_preset_id","xc_sticker_id","xhpc_message","xhpc_message_text"]}),null);
__d("PhotosUploadWaterfallErrorCodes",[],(function a(b,c,d,e,f,g){f.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25,SPHERICAL_CHECK_FAILED:26,SPHERICAL_CHECK_TIMEOUT:27}}),null);
__d("ComposerStoryCreateMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1931212663571278"};j.getQueryID=function(){"use strict";return "576284395828557"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d('ComposerPublisher',['ReactComposerFilteredFalseyParameters','ComposerStoryCreateMutationWebGraphQLMutation','ComposerPublisherSupportedParameters','WebGraphQL','WebGraphQLComposerGK','MentionsUtils','uuid'],(function a(b,c,d,e,f,g){var h={publish:function i(j,k){c('WebGraphQL').exec(new (c('ComposerStoryCreateMutationWebGraphQLMutation'))({input:this.translateData(j,k)})).done()},translateData:function i(j,k){k=this._getSupportedFeaturesData(k);var l={};l.actor_id=j;l.audience={web_privacyx:k.privacyx};l.client_mutation_id=c('uuid')();l.source='WWW';if(k.xhpc_message){var m=c('MentionsUtils').parseMessageMentions(k.xhpc_message),n=m.ranges,o=m.text;if(!n){l.message={text:k.xhpc_message_text,ranges:[]}}else{var p=n.map(function(u){return {offset:u.offset,length:u.length,entity:{id:u.uid}}});l.message={text:o,ranges:p}}}if(k.xc_sticker_id)l.referenced_sticker_id=k.xc_sticker_id;if(k.is_welcome_to_group_post)l.is_welcome_to_group_post=k.is_welcome_to_group_post;if(k.composer_source_surface)l.composer_source_surface=k.composer_source_surface;if(k.composer_entry_time)l.composer_entry_time=k.composer_entry_time;var q={};if(k.composer_session_duration)q.composition_duration=k.composer_session_duration;if(k.num_keystrokes)q.number_of_keystrokes=k.num_keystrokes;if(k.num_pastes)q.number_of_copy_pastes=k.num_pastes;if('composer_session_duration' in k||'num_keystrokes' in k||'num_pastes' in k)l.composer_session_events_log=q;if(k.composer_type)l.composer_type=k.composer_type;if(k.is_q_and_a)l.is_q_and_a=k.is_q_and_a;var r={};if(k.ref)r.ref=k.ref;if(k.composer_session_id)r.composer_session_id=k.composer_session_id;if(k.ref||k.composer_session_id)l.logging=r;if(k.text_format_preset_id)l.text_format_preset_id=k.text_format_preset_id;if(k.multilingual_specified_lang)l.specified_dialect=k.multilingual_specified_lang;if(k.multilingual_statuses&&k.multilingual_status_langs){var s=[];for(var t=0;t<k.multilingual_statuses.length;++t)s.push({message:k.multilingual_statuses[t],dialect:k.multilingual_status_langs[t]});l.multilingual_translations=s}return l},getShouldUseGraphQLForStatus:function i(j){if(!this._getTextPostGK())return false;return this._getShouldUseGraphQL(j)},getShouldUseGraphQLForMedia:function i(j){if(!this._getMediaPostGK())return false;return this._getShouldUseGraphQL(j)},_getShouldUseGraphQL:function i(j){j=this._getSupportedFeaturesData(j);for(var k in j)if(!c('ComposerPublisherSupportedParameters').includes(k))return false;return true},_getTextPostGK:function i(){return c('WebGraphQLComposerGK').web_graphml_text_post},_getMediaPostGK:function i(){return c('WebGraphQLComposerGK').web_graphml_media_post},_getSupportedFeaturesData:function i(j){c('ReactComposerFilteredFalseyParameters').parameter_names.forEach(function(m){if(m in j&&!j[m])delete j[m];});var k={};for(var l in j)if(c('ComposerPublisherSupportedParameters').includes(l))k[l]=j[l];return k}};f.exports=h}),null);
__d('PhotoUploadFacerecWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PhotoUploadFacerecWaterfallLoggerConfig',this.$PhotoUploadFacerecWaterfallTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PhotoUploadFacerecWaterfallLoggerConfig',this.$PhotoUploadFacerecWaterfallTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$PhotoUploadFacerecWaterfallTypedLogger1={};return this};h.prototype.updateData=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1=babelHelpers['extends']({},this.$PhotoUploadFacerecWaterfallTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.event=j;return this};h.prototype.setFaceBoxID=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.face_box_id=j;return this};h.prototype.setPhotoFbid=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.photo_fbid=j;return this};h.prototype.setRecognizedUser=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.recognized_user=j;return this};h.prototype.setTaggedUser=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.tagged_user=j;return this};h.prototype.setVC=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.vc=j;return this};var i={event:true,face_box_id:true,photo_fbid:true,recognized_user:true,tagged_user:true,vc:true};f.exports=h}),null);
__d('ReactComposerAudienceSelectorActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirrorRecursive')({SET_SELECTED_GROUP:null,SET_SELECTED_FRIENDS:null,SET_ATTACHMENT_CONFIG:null,SET_COMPOSER_ATTACHMENT_TYPE:null,SET_IS_ERROR_SHOWN:null},'ReactComposerAudienceSelectorActionType')}),null);
__d('ReactComposerAudienceSelectorStore',['ReactComposerAudienceSelectorActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){var k;i.constructor.call(this,function(){return {composerID:null,groupID:null,groupName:null,friendIDs:null,attachmentConfig:null,attachmentType:null,isErrorShown:null}},function(l){switch(l.type){case c('ReactComposerAudienceSelectorActionType').SET_SELECTED_GROUP:k&&k.$ReactComposerAudienceSelectorStore1(l);break;case c('ReactComposerAudienceSelectorActionType').SET_SELECTED_FRIENDS:k&&k.$ReactComposerAudienceSelectorStore2(l);break;case c('ReactComposerAudienceSelectorActionType').SET_ATTACHMENT_CONFIG:k&&k.$ReactComposerAudienceSelectorStore3(l);break;case c('ReactComposerAudienceSelectorActionType').SET_COMPOSER_ATTACHMENT_TYPE:k&&k.$ReactComposerAudienceSelectorStore4(l);break;case c('ReactComposerAudienceSelectorActionType').SET_IS_ERROR_SHOWN:k&&k.$ReactComposerAudienceSelectorStore5(l);break;}});k=this}j.prototype.getGroupID=function(k){return this.getComposerData(k).groupID};j.prototype.getGroupName=function(k){return this.getComposerData(k).groupName};j.prototype.isAudienceSelectorSelected=function(k){return this.getComposerData(k).isAudienceSelectorSelected};j.prototype.$ReactComposerAudienceSelectorStore1=function(k){var l=this.getComposerData(k.composerID);l.groupID=k.groupID;l.groupName=k.groupName;l.isErrorShown=false;l.isAudienceSelectorSelected=k.isAudienceSelectorSelected;this.emitChange(k.composerID)};j.prototype.getFriendIDs=function(k){return this.getComposerData(k).friendIDs};j.prototype.$ReactComposerAudienceSelectorStore2=function(k){var l=this.getComposerData(k.composerID);l.friendIDs=k.friendIDs;l.isErrorShown=false;this.emitChange(k.composerID)};j.prototype.getAttachmentConfig=function(k){return this.getComposerData(k).attachmentConfig};j.prototype.$ReactComposerAudienceSelectorStore3=function(k){var l=this.getComposerData(k.composerID);l.attachmentConfig=k.attachmentConfig;this.emitChange(k.composerID)};j.prototype.getComposerAttachmentType=function(k){return this.getComposerData(k).attachmentType};j.prototype.$ReactComposerAudienceSelectorStore4=function(k){var l=this.getComposerData(k.composerID);l.attachmentType=k.attachmentType;this.emitChange(k.composerID)};j.prototype.getIsErrorShown=function(k){return this.getComposerData(k).isErrorShown};j.prototype.$ReactComposerAudienceSelectorStore5=function(k){var l=this.getComposerData(k.composerID);l.isErrorShown=k.isErrorShown;this.emitChange(k.composerID)};f.exports=new j()}),null);
/*
 * @preserve-header
 * @nolint
 *
 * Javascript EXIF Reader 0.1.6
 * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
 * Licensed under the MPL License [http://www.nihilogic.dk/licenses/mpl-license.txt]
 */
__d("exif/exif",[],(function a(b,c,d,e,f,g){var h=function(){var i={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},j={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},k={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(y,event,z){if(y.addEventListener){y.addEventListener(event,z,false)}else if(y.attachEvent)y.attachEvent("on"+event,z);}function n(y){return !!y.exifdata}function o(y,z){BinaryAjax(y.src,function(aa){var ba=p(aa.binaryResponse);y.exifdata=ba||{};if(z)z.call(y);})}function p(y){if(y.getByteAt(0)!=255||y.getByteAt(1)!=216)return false;var z=2,aa=y.getLength(),ba;while(z<aa){if(y.getByteAt(z)!=255)return false;ba=y.getByteAt(z+1);if(ba==22400){return s(y,z+4,y.getShortAt(z+2,true)-2)}else if(ba==225){return s(y,z+4,y.getShortAt(z+2,true)-2)}else z+=2+y.getShortAt(z+2,true);}}function q(y,z,aa,ba,ca){var da=y.getShortAt(aa,ca),ea={},fa,ga,ha;for(ha=0;ha<da;ha++){fa=aa+ha*12+2;ga=ba[y.getShortAt(fa,ca)];ea[ga]=r(y,fa,z,aa,ca)}return ea}function r(y,z,aa,ba,ca){var da=y.getShortAt(z+2,ca),ea=y.getLongAt(z+4,ca),fa=y.getLongAt(z+8,ca)+aa,ga,ha,ia,ja,ka,la;switch(da){case 1:case 7:if(ea==1){return y.getByteAt(z+8,ca)}else{ga=ea>4?fa:z+8;ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getByteAt(ga+ja);return ha}case 2:ga=ea>4?fa:z+8;return y.getStringAt(ga,ea-1);case 3:if(ea==1){return y.getShortAt(z+8,ca)}else{ga=ea>2?fa:z+8;ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getShortAt(ga+2*ja,ca);return ha}case 4:if(ea==1){return y.getLongAt(z+8,ca)}else{ha=[];for(var ja=0;ja<ea;ja++)ha[ja]=y.getLongAt(fa+4*ja,ca);return ha}case 5:if(ea==1){ka=y.getLongAt(fa,ca);la=y.getLongAt(fa+4,ca);ia=new Number(ka/la);ia.numerator=ka;ia.denominator=la;return ia}else{ha=[];for(ja=0;ja<ea;ja++){ka=y.getLongAt(fa+8*ja,ca);la=y.getLongAt(fa+4+8*ja,ca);ha[ja]=new Number(ka/la);ha[ja].numerator=ka;ha[ja].denominator=la}return ha}case 9:if(ea==1){return y.getSLongAt(z+8,ca)}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+4*ja,ca);return ha}case 10:if(ea==1){return y.getSLongAt(fa,ca)/y.getSLongAt(fa+4,ca)}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+8*ja,ca)/y.getSLongAt(fa+4+8*ja,ca);return ha}}}function s(y,z){if(y.getStringAt(z,4)!="Exif")return false;var aa,ba,ca,da,ea,fa=z+6;if(y.getShortAt(fa)==18761){aa=false}else if(y.getShortAt(fa)==19789){aa=true}else return false;if(y.getShortAt(fa+2,aa)!=42)return false;if(y.getLongAt(fa+4,aa)!=8)return false;ba=q(y,fa,fa+8,j,aa);if(ba.ExifIFDPointer){da=q(y,fa,fa+ba.ExifIFDPointer,i,aa);for(ca in da){switch(ca){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":da[ca]=l[ca][da[ca]];break;case "ExifVersion":case "FlashpixVersion":da[ca]=String.fromCharCode(da[ca][0],da[ca][1],da[ca][2],da[ca][3]);break;case "ComponentsConfiguration":da[ca]=l.Components[da[ca][0]]+l.Components[da[ca][1]]+l.Components[da[ca][2]]+l.Components[da[ca][3]];break;}ba[ca]=da[ca]}}if(ba.GPSInfoIFDPointer){ea=q(y,fa,fa+ba.GPSInfoIFDPointer,k,aa);for(ca in ea){switch(ca){case "GPSVersionID":ea[ca]=ea[ca][0]+"."+ea[ca][1]+"."+ea[ca][2]+"."+ea[ca][3];break;}ba[ca]=ea[ca]}}return ba}function t(y,z){if(!y.complete)return false;if(!n(y)){o(y,z)}else if(z)z.call(y);return true}function u(y,z){if(!n(y))return;return y.exifdata[z]}function v(y){if(!n(y))return {};var z,aa=y.exifdata,ba={};for(z in aa)if(aa.hasOwnProperty(z))ba[z]=aa[z];return ba}function w(y){if(!n(y))return "";var z,aa=y.exifdata,ba="";for(z in aa)if(aa.hasOwnProperty(z))if(typeof aa[z]=="object"){if(aa[z] instanceof Number){ba+=z+" : "+aa[z]+" ["+aa[z].numerator+"/"+aa[z].denominator+"]\r\n"}else ba+=z+" : ["+aa[z].length+" values]\r\n";}else ba+=z+" : "+aa[z]+"\r\n";return ba}function x(y){return p(y)}return {readFromBinaryFile:x,pretty:w,getTag:u,getAllTags:v,getData:t,Tags:i,TiffTags:j,GPSTags:k,StringValues:l}}();f.exports=h}),null);
__d('ImageExif',['exif/exif'],(function a(b,c,d,e,f,g){function h(k){this.getByteAt=function(l){return k.getUint8(l)};this.getShortAt=function(l,m){return k.getUint16(l,!m)};this.getSShortAt=function(l,m){return k.getInt16(l,!m)};this.getLongAt=function(l,m){return k.getUint32(l,!m)};this.getSLongAt=function(l,m){return k.getInt32(l,!m)};this.getStringAt=function(l,m){var n=Array(m);for(var o=0;o<m;o++)n.push(String.fromCharCode(this.getByteAt(l+o)));return n.join('')};this.getLength=function(){return k.byteLength}}function i(k){var l=function m(n){return k.charCodeAt(n)&255};this.getByteAt=l;this.getShortAt=function(m,n){var o=this.getSShortAt(m,n);return o>0?o:o+65536};this.getSShortAt=function(m,n){var o=l(m),p=l(m+1);return n?(o<<8)+p:(p<<8)+o};this.getLongAt=function(m,n){var o=this.getSLongAt(m,n);return o>0?o:o+4294967296};this.getSLongAt=function(m,n){var o=l(m),p=l(m+1),q=l(m+2),r=l(m+3);return n?(((o<<8)+p<<8)+q<<8)+r:(((r<<8)+q<<8)+p<<8)+o};this.getStringAt=function(m,n){return k.substr(m,n)};this.getLength=function(){return k.length}}var j={readFromFile:function k(l,m){var n=new FileReader();n.addEventListener('load',function(event){var o=event.target.result,p=o instanceof ArrayBuffer?this.readFromArrayBuffer(o):this.readFromBinaryString(o);m(p)}.bind(this),false);if(window.DataView){n.readAsArrayBuffer(l)}else n.readAsBinaryString(l);},readFromBinaryString:function k(l){return c('exif/exif').readFromBinaryFile(new i(l))},readFromArrayBuffer:function k(l){return c('exif/exif').readFromBinaryFile(new h(new DataView(l)))}};f.exports=j}),null);
__d('StringEncoding',[],(function a(b,c,d,e,f,g){'use strict';function h(o,p){var q=new Uint8Array(o),r=0,s=[];while(r<q.length){var t=q[r],u=void 0;if(t>>7===0){u=1}else if(t>>5===6){t&=31;u=2}else if(t>>4===14){t&=15;u=3}else if(t>>3===30){t&=7;u=4}else if(t>>2===62){t&=3;u=5}else if(t>>1===126){t&=1;u=6}else throw new Error('Cannot decode as UTF-8 - unrecognised codepoint header');if(r+u>q.length)throw new Error('Cannot decode as UTF-8 - incomplete codepoint');for(var v=1;v<u;v++){var w=q[r+v];if(w>>6!==2)throw new Error('Cannot decode as UTF-8 - '+'unrecognised codepoint subsequent byte');w&=63;t<<=6;t|=w}if(t>1114111)throw new Error('Cannot decode as UTF-8 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!t)switch(p){case 'error':throw new Error('Cannot decode as UTF-8 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(t);r+=u}return String.fromCodePoint.apply(String,s)}function i(o){return (o&255)<<8|o>>8}function j(o,p){if(o.byteLength%2!==0)throw new Error('Cannot decode as UTF-16 - data length mod 2 != 0');var q=new Uint16Array(o),r=0,s=[],t=false;if(q[0]===65279){++r}else if(q[0]==65534){++r;t=true}while(r<q.length){var u=q[r];if(t)u=i(u);var v=u;if(u>55295&&u<57344){if((u&64512)!==55296)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for high surrogate');if(r+1>=q.length)throw new Error('Cannot decode as UTF-16 - incomplete codepoint');++r;var w=q[r];if(t)w=i(w);if((w&64512)!==56320)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for low surrogate');v=((u&1023)<<10|w&1023)+65536}if(!v)switch(p){case 'error':throw new Error('Cannot decode as UTF-16 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(v);++r}return String.fromCodePoint.apply(String,s)}function k(o){return (o&255)<<24|(o&255<<8)<<8|(o&255<<16)>>8|o>>>24}function l(o,p){if(o.byteLength%4!==0)throw new Error('Cannot decode as UTF-32 - data length mod 4 != 0');var q=new Uint32Array(o),r=0,s=[],t=false;if(q[0]===65279){++r}else if(q[0]==4294836224){++r;t=true}while(r<q.length){var u=q[r];if(t)u=k(u);if(u&2147483648)throw new Error('Cannot decode as UTF-32 - invalid codepoint');if(u>1114111)throw new Error('Cannot decode as UTF-32 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!u)switch(p){case 'error':throw new Error('Cannot decode as UTF-32 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(u);++r}return String.fromCodePoint.apply(String,s)}var m={'utf-8':h,'utf-16':j,'utf-32':l};function n(o,p){if(o){this.$Decoder1=o}else this.$Decoder1=['utf-8','utf-16','utf-32'];if(!p)p='error';this.$Decoder2=p;for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;this.$Decoder3(u)}}n.prototype.getPrecedence=function(){return this.$Decoder1};n.prototype.decode=function(o){var p=[];for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t,v=this.$Decoder3(u);try{return v(o,this.$Decoder2)}catch(w){p.push(w)}}throw new Error(p.join(', '))};n.prototype.$Decoder3=function(o){var p=m[o];if(!p)throw new Error('Unknown encoding '+o);return p};f.exports.Decoder=n}),null);
__d('ImageMetadata',['regeneratorRuntime','Promise','ImageExif','StringEncoding','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(m){this.$ImageMetadata4='';this.$ImageMetadata6=m;this.$ImageMetadata7=new Uint8Array(m);this.$ImageMetadata8()}h.prototype.$ImageMetadata8=function(){var m=0;while(m<this.$ImageMetadata7.length){m=this.$ImageMetadata9(m);if(m===-1)return;var n=this.$ImageMetadata7[m+1],o=i[n];if(!o)return;var p=o.length;if(p===undefined)p=this.$ImageMetadata7[m+2]*256+this.$ImageMetadata7[m+3];this.$ImageMetadata10(m,p,o);if(o.name==='SOS')return;m+=2+p}};h.prototype.$ImageMetadata10=function(m,n,o){switch(o.name){case 'APP1':if(this.$ImageMetadata11(m+4,j)){if(!this.$ImageMetadata1){this.$ImageMetadata1=m;this.$ImageMetadata2=n}this.$ImageMetadata12(m+4+j.length,n-2-j.length)}else if(this.$ImageMetadata11(m+4,k)){this.$ImageMetadata1=m;this.$ImageMetadata2=n;this.$ImageMetadata13(m+4+k.length,n-2-k.length)}else if(this.$ImageMetadata11(m+4,l)){this.$ImageMetadata14(m+4+l.length,n-2-l.length)}break;case 'SOF0':case 'SOF1':case 'SOF2':case 'SOF3':case 'SOF5':case 'SOF6':case 'SOF7':case 'JPG':case 'SOF9':case 'SOF10':case 'SOF11':case 'SOF13':case 'SOF14':case 'SOF15':this.$ImageMetadata15(m+4,n-2);break;}};h.prototype.$ImageMetadata15=function(m,n){var o=this.$ImageMetadata7[m+3]*256+this.$ImageMetadata7[m+4],p=this.$ImageMetadata7[m+1]*256+this.$ImageMetadata7[m+2];if(o>0&&p>0)this.$ImageMetadata5={x:o,y:p};};h.prototype.$ImageMetadata12=function(m,n){var o=emptyFunction;try{emptyFunction=c('emptyFunction');var p=c('ImageExif').readFromArrayBuffer(this.$ImageMetadata6)||{}}finally{emptyFunction=o}var q={};for(var r in p){var s=p[r];if(typeof s==='string')s=s.trim();q[r.trim()]=s}this.$ImageMetadata3=q};h.prototype.$ImageMetadata13=function(m,n){var o=new (c('StringEncoding').Decoder)(null,'truncate');try{var p=o.decode(this.$ImageMetadata6.slice(m,m+n));this.$ImageMetadata4=p}catch(q){return}};h.prototype.$ImageMetadata14=function(m){};h.prototype.$ImageMetadata11=function(m,n){return n.split('').every(function(o){return this.$ImageMetadata7[m++]===o.charCodeAt(0)}.bind(this))};h.prototype.$ImageMetadata9=function(m){for(var n=m;n+1<this.$ImageMetadata7.length;++n)if(this.$ImageMetadata7[n]===255&&this.$ImageMetadata7[n+1]!==0&&this.$ImageMetadata7[n+1]!==255)return n;return -1};h.prototype.hasAPP1=function(){return Boolean(this.$ImageMetadata1)};h.prototype.hasExif=function(){return Boolean(this.$ImageMetadata3)};h.prototype.hasXMP=function(){return Boolean(this.$ImageMetadata4)};h.prototype.hasSize=function(){return Boolean(this.$ImageMetadata5)};h.prototype.getAPP1Location=function(){if(!this.hasAPP1())return null;return this.$ImageMetadata1};h.prototype.getAPP1Length=function(){if(!this.hasAPP1())return null;return this.$ImageMetadata2};h.prototype.getExif=function(){if(!this.$ImageMetadata3)throw new Error('Image has no Exif data');return this.$ImageMetadata3};h.prototype.getXMPString=function(){return this.$ImageMetadata4};h.prototype.getSize=function(){if(!this.$ImageMetadata5)throw new Error('Could not find size data?!');return this.$ImageMetadata5};h.genMetadataFromBlob=function m(n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.t0=h;p.next=3;return c('regeneratorRuntime').awrap(h.$ImageMetadata16(n));case 3:p.t1=p.sent;return p.abrupt('return',new p.t0(p.t1));case 5:case 'end':return p.stop();}},null,this)};h.$ImageMetadata16=function(m){return new (c('Promise'))(function(n,o){var p=new b.FileReader();p.onabort=o;p.onerror=o;p.onload=n;p.readAsArrayBuffer(m)})};var i=[];i[216]={name:'SOI',length:0};i[192]={name:'SOF0'};i[193]={name:'SOF1'};i[194]={name:'SOF2'};i[195]={name:'SOF3'};i[197]={name:'SOF5'};i[198]={name:'SOF6'};i[199]={name:'SOF7'};i[200]={name:'JPG'};i[201]={name:'SOF9'};i[202]={name:'SOF10'};i[203]={name:'SOF11'};i[205]={name:'SOF13'};i[206]={name:'SOF14'};i[207]={name:'SOF15'};i[196]={name:'DHT'};i[219]={name:'DQT'};i[221]={name:'DRI',length:2};i[218]={name:'SOS'};i[208]={name:'RST0',length:0};i[209]={name:'RST1',length:0};i[210]={name:'RST2',length:0};i[211]={name:'RST3',length:0};i[212]={name:'RST4',length:0};i[213]={name:'RST5',length:0};i[214]={name:'RST6',length:0};i[215]={name:'RST7',length:0};i[224]={name:'APP0'};i[225]={name:'APP1'};i[226]={name:'APP2'};i[227]={name:'APP3'};i[228]={name:'APP4'};i[229]={name:'APP5'};i[230]={name:'APP6'};i[231]={name:'APP7'};i[232]={name:'APP8'};i[233]={name:'APP9'};i[234]={name:'APP10'};i[235]={name:'APP11'};i[236]={name:'APP12'};i[237]={name:'APP13'};i[238]={name:'APP14'};i[239]={name:'APP15'};i[254]={name:'COM'};i[217]={name:'EOI',length:0};var j='Exif\0\0',k='http://ns.adobe.com/xap/1.0/\0',l='http://ns.adobe.com/xmp/extension/\0';f.exports=h}),null);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spherical_media\/photo\/metadata\/",{})}),null);
__d('SphericalImageUtils',['Promise','ImageMetadata','XAsyncRequest','XSphericalPhotoSphereMetadataAsyncController'],(function a(b,c,d,e,f,g){'use strict';var h=2048,i={genArrayBufferFromBlob:function j(k){return new (c('Promise'))(function(l,m){if(b.FileReader){var n=new b.FileReader();n.onabort=m;n.onerror=m;n.onload=function(event){l(event.target.result)};n.readAsArrayBuffer(k)}else m(new Error("global.FileReader doesn't exit"));})},shouldCheckInServer:function j(k){if(!k.hasExif()&&!k.hasXMP()||!k.hasSize())return false;var l=k.getXMPString();if(this.getMayContainSphericalMetadata(l))return true;var m=k.getSize(),n=m.x,o=m.y;if(Math.max(n,o)<h||n/o<2&&o/n<2)return false;var p=k.hasExif()?k.getExif():{};if(l===''&&(!p.Make||!p.Model))return false;return true},genPhotoSphereMetadata:function j(k){return new (c('Promise'))(function(l,m){this.genArrayBufferFromBlob(k).done(function(n){var o,p=this;try{(function(){var q=new (c('ImageMetadata'))(n);if(p.shouldCheckInServer(q)){p.genPhotoSphereMetadataFromServer(q.hasSize()?q.getSize():{x:0,y:0},q.getXMPString(),q.hasExif()?q.getExif():{}).done(function(r){var s=r.payload;l({photoSphereMetadata:s,imageMetadata:q})},m)}else l({});})()}catch(q){q.__manual=true;m(q)}}.bind(this),m)}.bind(this))},genPhotoSphereMetadataFromServer:function j(k,l,m){return new (c('Promise'))(function(n,o){new (c('XAsyncRequest'))(c('XSphericalPhotoSphereMetadataAsyncController').getURIBuilder().getURI()).setMethod('POST').setData({exif_string:this.getExifString(m),height:k.y,width:k.x,xmp:l}).setHandler(n).setErrorHandler(o).send()}.bind(this))},getExifString:function j(k){return JSON.stringify(k,function(l,m){if(l==='FocalLength'&&m.numerator&&m.denominator)return m.numerator+'/'+m.denominator;return m})},getMayContainSphericalMetadata:function j(k){return k!==''&&k.indexOf('GPano:')>-1}};f.exports=i}),null);
__d('SphericalImage',['regeneratorRuntime','SphericalImageUtils'],(function a(b,c,d,e,f,g){'use strict';var h='ProjectionType';function i(j){this.props=j}i.createFromBlob=function j(k){var l;return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(c('SphericalImageUtils').genPhotoSphereMetadata(k));case 2:l=n.sent;return n.abrupt('return',new this(l));case 4:case 'end':return n.stop();}},null,this)};i.prototype.isSpherical=function(){return Boolean(this.props.photoSphereMetadata)};i.prototype.getImageMetadata=function(){return this.props.imageMetadata};i.prototype.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata};i.prototype.getSize=function(){if(this.props.imageMetadata)return this.props.imageMetadata.getSize();return null};i.prototype.getProjectionType=function(){var j='';if(this.props.photoSphereMetadata&&this.props.photoSphereMetadata[h])j=this.props.photoSphereMetadata[h];return j};f.exports=i}),null);
__d('SphericalPhotoUploadHelper',[],(function a(b,c,d,e,f,g){'use strict';f.exports={shouldResize360:function h(i,j,k){if(j&&Math.max(j.x,j.y)<=k||i==='cubestrip')return false;return true}}}),null);
__d('XComposerPhotoUploader',['regeneratorRuntime','Promise','AsyncUploadRequest','FileInputUploader','JSLogger','PhotosMimeType','PhotosUploadID','ReactComposerMediaUtils','SphericalImage','SphericalPhotoConfig','SphericalPhotoUploadHelper','curry','emptyFunction','performanceNow'],(function a(b,c,d,e,f,g){'use strict';var h=c('SphericalPhotoUploadHelper').shouldResize360,i=b.URL||b.webkitURL||{};function j(k){this.$XComposerPhotoUploader2=k.uploadData||{};this.$XComposerPhotoUploader1=k.uploadEndpoint;this.$XComposerPhotoUploader3=k.retryLimit;this.$XComposerPhotoUploader4=k.concurrentLimit;this.$XComposerPhotoUploader5=k.resizer;this.$XComposerPhotoUploader6=k.onUploadEnqueued||c('emptyFunction');this.$XComposerPhotoUploader7=k.onUploadsEnqueued||c('emptyFunction');this.$XComposerPhotoUploader8=k.onResizeStart||c('emptyFunction');this.$XComposerPhotoUploader11=k.onResizeProgress||c('emptyFunction');this.$XComposerPhotoUploader9=k.onResizeSuccess||c('emptyFunction');this.$XComposerPhotoUploader10=k.onResizeFailure||c('emptyFunction');this.$XComposerPhotoUploader12=k.onSphericalCheckFailure||c('emptyFunction');this.$XComposerPhotoUploader13=k.onSphericalCheckSuccess||c('emptyFunction');this.$XComposerPhotoUploader14=k.onUploadIsSpherical||c('emptyFunction');this.$XComposerPhotoUploader15=k.onUploadSent||c('emptyFunction');this.$XComposerPhotoUploader16=k.onUploadStart||c('emptyFunction');this.$XComposerPhotoUploader17=k.onUploadProgress||c('emptyFunction');this.$XComposerPhotoUploader18=k.onUploadSuccess||c('emptyFunction');this.$XComposerPhotoUploader19=k.onUploadFailure||c('emptyFunction');this.$XComposerPhotoUploader20=c('JSLogger').create('composer')}j.prototype.upload=function(k,l){l=l||0;var m=Object.assign({},this.$XComposerPhotoUploader2),n=null;if(!this.$XComposerPhotoUploader21(k)){var o=c('PhotosUploadID').getNewID();k.uploadID=o;m.upload_id=o;this.$XComposerPhotoUploader6({uploadID:o,fileName:k.value.split('/').pop().split('\\').pop(),fileURL:i.createObjectURL?i.createObjectURL(k):null})}else{n=Array.from(k.files);n=n.filter(function(r){return !c('ReactComposerMediaUtils').hasVideos([r.name])});if(n.length===0)return;var p=n.length+l;n.forEach(function(r){if(!r.uploadID)r.uploadID=c('PhotosUploadID').getNewID();this.$XComposerPhotoUploader6({uploadID:r.uploadID,fileName:r.name,isSpherical:false,fileURL:i.createObjectURL?i.createObjectURL(r):null})}.bind(this))}this.$XComposerPhotoUploader7();var q=new (c('FileInputUploader'))(k).setURI(this.$XComposerPhotoUploader1).setData(m).setAllowCrossOrigin(true).setNetworkErrorRetryLimit(this.$XComposerPhotoUploader3).setUploadInParallel(true);if(n&&n.length>0){q.setFiles({farr:n});if(this.$XComposerPhotoUploader5){q.setPreprocessHandler(this.$XComposerPhotoUploader22.bind(this))}else q.setPreprocessHandler(this.$XComposerPhotoUploader23.bind(this));if(this.$XComposerPhotoUploader4)q.setConcurrentLimit(this.$XComposerPhotoUploader4);}q.subscribe('progress',function(r,s){return this.$XComposerPhotoUploader17(this.$XComposerPhotoUploader24(s,k),s)}.bind(this));q.subscribe('failure',function(r,s){return this.$XComposerPhotoUploader19(this.$XComposerPhotoUploader24(s,k),s,n)}.bind(this));q.subscribe('start',function(r,s){return this.$XComposerPhotoUploader16(this.$XComposerPhotoUploader24(s,k),s)}.bind(this));q.subscribe('success',function(r,s){return this.$XComposerPhotoUploader18(this.$XComposerPhotoUploader24(s,k),s)}.bind(this));try{q.send();this.$XComposerPhotoUploader15(k)}catch(r){this.$XComposerPhotoUploader20.error('error_send_unpublished_files',r);throw r}};j.prototype.getAsyncUploadRequest=function(k,l){var m=new (c('AsyncUploadRequest'))().setData(Object.assign({},l&&l.data,this.$XComposerPhotoUploader2)).setFiles({farr:k}).setAllowCrossOrigin(true).setURI(this.$XComposerPhotoUploader1);if(this.$XComposerPhotoUploader4)m.setLimit(this.$XComposerPhotoUploader4);if(this.$XComposerPhotoUploader5)m.setPreprocessHandler(this.$XComposerPhotoUploader22.bind(this));m.subscribe('start',function(n,o){return this.$XComposerPhotoUploader16(o.getFile().uploadID,{upload:o})}.bind(this));m.subscribe('progress',function(n,o){return this.$XComposerPhotoUploader17(o.getFile().uploadID,{upload:o,event:o.getProgressEvent()})}.bind(this));m.subscribe('success',function(n,o){return this.$XComposerPhotoUploader18(o.getFile().uploadID,{upload:o,response:o.getResponse()})}.bind(this));m.subscribe('failure',function(n,o){return this.$XComposerPhotoUploader19(o.getFile().uploadID,{upload:o,response:o.getResponse()},k)}.bind(this));return m};j.prototype.$XComposerPhotoUploader24=function(k,l){if(k.upload){return k.upload.getFile().uploadID}else return l.uploadID;};j.prototype.$XComposerPhotoUploader23=function(k,l){(function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader25(k,l));case 2:return o.abrupt('return',o.sent);case 3:case 'end':return o.stop();}},null,this)}).bind(this)().done()};j.prototype.$XComposerPhotoUploader25=function k(l,m){var n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:n=l.getFile();q.next=3;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader26(n));case 3:o=q.sent;if(o&&o.isSpherical()){this.$XComposerPhotoUploader14(n,o.isSpherical(),o.getProjectionType())}else this.$XComposerPhotoUploader14(n,false,'');m(l);case 6:case 'end':return q.stop();}},null,this)};j.prototype.$XComposerPhotoUploader22=function(k,l){(function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader27(k,l));case 2:return o.abrupt('return',o.sent);case 3:case 'end':return o.stop();}},null,this)}).bind(this)().done()};j.prototype.$XComposerPhotoUploader26=function k(l){var m,n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:m=c('performanceNow')();p.prev=1;p.next=4;return c('regeneratorRuntime').awrap(c('SphericalImage').createFromBlob(l));case 4:n=p.sent;this.$XComposerPhotoUploader13(l,c('performanceNow')()-m,n);return p.abrupt('return',n);case 9:p.prev=9;p.t0=p['catch'](1);this.$XComposerPhotoUploader12(l,c('performanceNow')()-m);return p.abrupt('return',null);case 14:case 'end':return p.stop();}},null,this,[[1,9]])};j.prototype.$XComposerPhotoUploader28=function(k){return this.$XComposerPhotoUploader29(this.$XComposerPhotoUploader5.resizeBlob.bind(this.$XComposerPhotoUploader5),k)};j.prototype.$XComposerPhotoUploader30=function(k){return this.$XComposerPhotoUploader29(this.$XComposerPhotoUploader5.resize360Blob.bind(this.$XComposerPhotoUploader5),k,c('SphericalPhotoConfig').upload_size_limit)};j.prototype.$XComposerPhotoUploader29=function(k,l,m){var n=c('curry')(this.$XComposerPhotoUploader11,l.uploadID),o=function(){return this.$XComposerPhotoUploader8(l)}.bind(this);return new (c('Promise'))(function(p,q){o();k(l,function(r,s,t){if(r){q(r)}else if(t){p(null)}else p(s);},n,m)})};j.prototype.$XComposerPhotoUploader27=function k(l,m){var n,o,p,q,r,s,t,u,v;return c('regeneratorRuntime').async(function w(x){while(1)switch(x.prev=x.next){case 0:n=l.getFile();if(!(!n||!c('PhotosMimeType').isJpeg(n.type))){x.next=5;break}this.$XComposerPhotoUploader14(n,false,'');m(l);return x.abrupt('return');case 5:o=c('performanceNow')();x.prev=6;p=null;if(!c('SphericalPhotoConfig').spherical_photo_www_upload){x.next=12;break}x.next=11;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader26(n));case 11:p=x.sent;case 12:if(!(p&&p.isSpherical())){x.next=23;break}this.$XComposerPhotoUploader14(n,true,p.getProjectionType());r=p.getSize();s=c('SphericalPhotoConfig').upload_size_limit;t=p.getProjectionType();if(!h(t,r,s)){x.next=21;break}x.next=20;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader30(n));case 20:q=x.sent;case 21:x.next=27;break;case 23:this.$XComposerPhotoUploader14(n,false,'');x.next=26;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader28(n));case 26:q=x.sent;case 27:if(q){q.uploadID=n.uploadID;q.name=n.name;l.setFile(q)}u=q===null;l.getFile().filename=n.name;this.$XComposerPhotoUploader9(n,q||n,u,c('performanceNow')()-o);x.next=38;break;case 33:x.prev=33;x.t0=x['catch'](6);v=c('performanceNow')()-o;this.$XComposerPhotoUploader10(n,q||n,x.t0,v);case 38:m(l);case 39:case 'end':return x.stop();}},null,this,[[6,33]])};j.prototype.$XComposerPhotoUploader21=function(k){return !!k.files&&c('AsyncUploadRequest').isSupported()};f.exports=j}),null);
__d('ReactComposerCanvasActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({HIDE_CANVAS_SELECTOR:null,SHOW_CANVAS_SELECTOR:null},'ReactComposerCanvasActionType')}),null);
__d('ReactComposerPhotoCarouselActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SELECT_PHOTO_CAROUSEL:null,UNSELECT_PHOTO_CAROUSEL:null,PREVIEW_COMPLETED:null,PREVIEW_INCOMPLETED:null,HIDE_CAROUSEL_URL_INPUT_AREA:null,SHOW_CAROUSEL_URL_INPUT_AREA:null,SEEN_NUX:null},'ReactComposerPhotoCarouselActionType')}),null);
__d("CarouselPagesComposerSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CAROUSEL_CAMERA_ICON:"carousel_camera_icon"})}),null);
__d('ReactComposerPhotoCarouselStore',['CarouselPagesComposerSource','PagesComposerActionsLogger','PagesComposerPostActionsLoggerEvent','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerPhotoCarouselActionType','ReactComposerScrapedAttachmentActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isPhotoCarouselSelected:false,isCarouselPreviewCompleted:true,shouldShowURLEditArea:false,seenNux:false}},function(l){switch(l.type){case c('ReactComposerPhotoCarouselActionType').SELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore1(l);break;case c('ReactComposerPhotoCarouselActionType').UNSELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore2(l);break;case c('ReactComposerPhotoCarouselActionType').PREVIEW_COMPLETED:k&&k.$ReactComposerPhotoCarouselStore3(l);break;case c('ReactComposerPhotoCarouselActionType').PREVIEW_INCOMPLETED:k&&k.$ReactComposerPhotoCarouselStore4(l);break;case c('ReactComposerPhotoCarouselActionType').SHOW_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore5(l);break;case c('ReactComposerPhotoCarouselActionType').HIDE_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerPhotoCarouselStore7(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c('ReactComposerPhotoCarouselActionType').SEEN_NUX:k&&k.$ReactComposerPhotoCarouselStore8(l);break;default:}});k=this}j.prototype.$ReactComposerPhotoCarouselStore1=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=true;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore2=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore3=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=true;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore4=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore5=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=true;var n=k.source;if(n===c('CarouselPagesComposerSource').CAROUSEL_CAMERA_ICON)c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_CAROUSEL_CAMERA_ICON,target_id:k.targetID});this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore6=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore7=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l),n=c('ReactComposerAttachmentStore').getSelectedAttachmentID(l);if(m.shouldShowURLEditArea&&n!==c('ReactComposerAttachmentType').MEDIA)m.shouldShowURLEditArea=false;if(m.isPhotoCarouselSelected&&n!==c('ReactComposerAttachmentType').MEDIA){m.isPhotoCarouselSelected=false;m.isCarouselPreviewCompleted=false}this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore8=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.seenNux=true;this.emitChange(l)};j.prototype.shouldShowURLEditArea=function(k){'use strict';return this.getComposerData(k).shouldShowURLEditArea};j.prototype.seenNux=function(k){'use strict';return this.getComposerData(k).seenNux};j.prototype.isPhotoCarouselSelected=function(k){'use strict';return this.getComposerData(k).isPhotoCarouselSelected};j.prototype.isCarouselPreviewCompleted=function(k){'use strict';return this.getComposerData(k).isCarouselPreviewCompleted};f.exports=new j()}),null);
__d('ReactComposerCollectionActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({ATTACHMENT_SELECT_COLLECTION:null,ATTACHMENT_CANCEL_COLLECTION:null,SET_COLLECTION:null,SET_DEFAULT_CANVAS_AND_TEMPLATE_ID:null,SET_POST_TITLE:null,SET_PRODUCT_SET_ID:null,SET_FEATURED_PRODUCT_IDS:null,SHOW_FEATURED_PRODUCT_DIALOG:null,HIDE_FEATURED_PRODUCT_DIALOG:null,UPDATE_COLLECTION_DIALOG_VISIBILITY:null},'ReactComposerCollectionActionType')}),null);
__d("XReactComposerCollectionAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/collection\/bootstrap\/",{composer_id:{type:"String",required:true},canvas_id:{type:"FBID",required:true},target_id:{type:"FBID",required:true}})}),null);
__d("XReactComposerCollectionAttachmentPublishController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/collection\/publish\/",{canvas_id:{type:"FBID",required:true},featured_retailer_ids:{type:"StringSet",required:true}})}),null);
__d('ReactComposerCollectionStore',['Bootloader','ActorURI','AsyncRequest','ReactComposerActionTypes','ReactComposerCollectionActionType','ReactComposerStoreBase','XReactComposerCollectionAttachmentBootstrapController','XReactComposerCollectionAttachmentPublishController','AdsCollectionsConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsCollectionsConstants').EMPTY_COLLECTIONS_RETAIL_ID;h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){var l=void 0;i.constructor.call(this,function(){return {actorID:null,attachmentConfig:{},canvasID:null,defaultCanvasID:null,featuredRetailerIDs:j,featuredRetailerImages:[],heroImage:null,heroVideo:null,isCollectionSelected:false,isLoading:false,itemIDs:[],itemImages:[],productCatalogVertical:null,productSetID:null,templateID:null}},function(m){switch(m.type){case c('ReactComposerCollectionActionType').ATTACHMENT_SELECT_COLLECTION:l&&l.$ReactComposerCollectionStore1(m);break;case c('ReactComposerCollectionActionType').ATTACHMENT_CANCEL_COLLECTION:l&&l.$ReactComposerCollectionStore2(m);break;case c('ReactComposerCollectionActionType').SET_COLLECTION:l&&l.$ReactComposerCollectionStore3(m);break;case c('ReactComposerCollectionActionType').SET_POST_TITLE:l&&l.$ReactComposerCollectionStore4(m);break;case c('ReactComposerCollectionActionType').SET_PRODUCT_SET_ID:l&&l.$ReactComposerCollectionStore5(m);break;case c('ReactComposerCollectionActionType').SET_FEATURED_PRODUCT_IDS:l&&l.$ReactComposerCollectionStore6(m);break;case c('ReactComposerCollectionActionType').SHOW_FEATURED_PRODUCT_DIALOG:l&&l.$ReactComposerCollectionStore7(m,true);break;case c('ReactComposerCollectionActionType').HIDE_FEATURED_PRODUCT_DIALOG:l&&l.$ReactComposerCollectionStore7(m,false);break;case c('ReactComposerCollectionActionType').UPDATE_COLLECTION_DIALOG_VISIBILITY:l&&l.$ReactComposerCollectionStore8(m);break;case c('ReactComposerCollectionActionType').SET_DEFAULT_CANVAS_AND_TEMPLATE_ID:l&&l.$ReactComposerCollectionStore9(m);break;case c('ReactComposerActionTypes').POST_STARTED:l&&l.$ReactComposerCollectionStore10(m);break;case c('ReactComposerActionTypes').PUBLISH_STARTED:l&&l.$ReactComposerCollectionStore11(m);break;default:break;}});l=this}k.prototype.$ReactComposerCollectionStore12=function(l,m){var n=this.getComposerData(l),o=Object.entries(m).filter(function(w){var x=w[0],y=w[1];return n[x]!==y});if(o.length){for(var p=o,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s,u=t[0],v=t[1];n[u]=v}this.emitChange(l)}};k.prototype.$ReactComposerCollectionStore2=function(l){var m=this.validateAction(l,'composerID');this.clearComposerData(m);this.emitChange(m)};k.prototype.$ReactComposerCollectionStore1=function(l){var m=this.validateAction(l,['actorID','composerID','canvasID','targetID']),n=m[0],o=m[1],p=m[2],q=m[3],r=c('XReactComposerCollectionAttachmentBootstrapController').getURIBuilder().setString('composer_id',o).setFBID('canvas_id',p).setFBID('target_id',q).getURI();r=c('ActorURI').create(r,n);new (c('AsyncRequest'))(r).send();this.$ReactComposerCollectionStore12(o,{attachmentConfig:{},canvasID:p,isCollectionSelected:!!p,isLoading:true})};k.prototype.$ReactComposerCollectionStore10=function(l){var m=this.validateAction(l,['actorID','composerID']),n=m[0],o=m[1],p=this.getComposerData(o);if(!p.isCollectionSelected)return;p.actorID=n};k.prototype.$ReactComposerCollectionStore11=function(l){var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);if(!n.actorID)return;var o=c('XReactComposerCollectionAttachmentPublishController').getURIBuilder().setFBID('canvas_id',n.canvasID).setStringSet('featured_retailer_ids',n.featuredRetailerIDs).getURI();o=c('ActorURI').create(o,n.actorID);new (c('AsyncRequest'))(o).send();n.actorID=null;this.$ReactComposerCollectionStore8({composerID:m,isVisible:false,canvasID:null})};k.prototype.$ReactComposerCollectionStore3=function(l){var m=l.composerID,n=l.postTitle,o=babelHelpers.objectWithoutProperties(l,['composerID','postTitle']),p=o.attachmentConfig.params;p.title=n;if(o.heroImage){p.images.push(o.heroImage)}else if(o.heroVideo)p.video.push(o.heroVideo);o.isLoading=false;this.$ReactComposerCollectionStore12(m,o)};k.prototype.$ReactComposerCollectionStore4=function(l){var m=this.validateAction(l,['composerID','postTitle']),n=m[0],o=m[1],p=this.getComposerData(n);p.attachmentConfig.params.title=o;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore5=function(l){var m=this.validateAction(l,['composerID','productSetID','productCatalogVertical']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.productSetID=o;q.productCatalogVertical=p;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore7=function(l,m){var n=this.validateAction(l,'composerID'),o=this.getComposerData(n);o.shouldShowFeaturedProductDialog=m;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore6=function(l){var m=this.validateAction(l,['composerID','featuredRetailerIDs','featuredRetailerImages']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.featuredRetailerIDs=o;q.featuredRetailerImages=p;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore8=function(l){c('Bootloader').loadModules(["AdsCanvasInlineBuilderActions"],function(m){var n=this.validateAction(l,['composerID','isVisible']),o=n[0],p=n[1],q=l.canvasID,r=this.getComposerData(o),s=r.defaultCanvasID,t=r.templateID;m.setShowInlineModal(p,q||s,t)}.bind(this),'ReactComposerCollectionStore')};k.prototype.$ReactComposerCollectionStore9=function(l){var m=this.validateAction(l,['composerID','defaultCanvasID','templateID']),n=m[0],o=m[1],p=m[2];this.$ReactComposerCollectionStore12(n,{defaultCanvasID:o,templateID:p})};k.prototype.shouldShowFeaturedProductDialog=function(l){return this.getComposerData(l).shouldShowFeaturedProductDialog};k.prototype.isCollectionSelected=function(l){return this.getComposerData(l).isCollectionSelected};k.prototype.isLoading=function(l){return this.getComposerData(l).isLoading};k.prototype.getAttachmentConfig=function(l){var m=this.getComposerData(l),n=m.attachmentConfig;return n.params?n:null};k.prototype.getCanvasID=function(l){return this.getComposerData(l).canvasID};k.prototype.getHeroImage=function(l){return this.getComposerData(l).heroImage};k.prototype.getHeroVideo=function(l){return this.getComposerData(l).heroVideo};k.prototype.getItemImages=function(l){var m=this.getComposerData(l),n=m.featuredRetailerIDs,o=m.featuredRetailerImages,p=m.itemIDs,q=m.itemImages,r=n.reduce(function(t,u){t[u]=true;return t},{}),s=q.filter(function(t,u){return !r[p[u]]});return o.concat(s).slice(0,4)};k.prototype.getPostTitle=function(l){var m=this.getComposerData(l),n=m.attachmentConfig.params;return n?n.title:''};k.prototype.getProductCatalogVertical=function(l){return this.getComposerData(l).productCatalogVertical};k.prototype.getProductSetID=function(l){return this.getComposerData(l).productSetID};f.exports=new k()}),null);
__d("XReactComposerQAndAAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/qanda\/bootstrap\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},target_id:{type:"Int",required:true}})}),null);
__d('ReactComposerQAndALazyAttachment.react',['ActorURI','Bootloader','React','ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','XReactComposerQAndAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerQAndALazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').QANDA},propTypes:{bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function i(j){if(this.props.bootloader&&this.props.bootloader.qandaAttachment){this.props.bootloader.qandaAttachment(j)}else c('Bootloader').loadModules(["ReactComposerQAndAAttachmentContainer.react","ReactComposerFeedMediaPostButtonContainer.react"],j,'ReactComposerQAndALazyAttachment.react');},getBootstrapURI:function i(){var j=c('XReactComposerQAndAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).getURI();return c('ActorURI').create(j,this.context.actorID)}});f.exports=h}),null);
__d('ReactComposerLocationAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({LOCATION_ATTACHMENT_ENABLED:null,FETCH_LOCATION_ATTACHMENT:null,SET_MINUTIAE_ACTION_CONTEXT:null,SET_LOCATION_MARKUP:null},'ReactComposerLocationAttachmentActionType')}),null);
__d("XReactComposerLocationAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/location\/attachment\/",{composer_id:{type:"String",required:true},location_id:{type:"String",required:true},target_id:{type:"String",required:true}})}),null);
__d('ReactComposerLocationAttachmentStore',['AsyncRequest','ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerLocationAttachmentActionType','ReactComposerStoreBase','XReactComposerLocationAttachmentController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isEnabled:false,isFetching:false,markup:null,pendingRequest:null,minutiaeTaggedPlace:null,isTimeline:false}},function(l){switch(l.type){case c('ReactComposerLocationAttachmentActionType').LOCATION_ATTACHMENT_ENABLED:k&&k.$ReactComposerLocationAttachmentStore1(l);break;case c('ReactComposerLocationAttachmentActionType').FETCH_LOCATION_ATTACHMENT:k&&k.$ReactComposerLocationAttachmentStore2(l);break;case c('ReactComposerLocationAttachmentActionType').SET_MINUTIAE_ACTION_CONTEXT:k&&k.$ReactComposerLocationAttachmentStore3(l);break;case c('ReactComposerLocationAttachmentActionType').SET_LOCATION_MARKUP:k&&k.$ReactComposerLocationAttachmentStore4(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerLocationAttachmentStore5(l);break;}});k=this}j.prototype.isEnabled=function(k){'use strict';return this.getComposerData(k).isEnabled};j.prototype.getMarkup=function(k){'use strict';return this.getComposerData(k).markup};j.prototype.getMinutiaeTaggedPlace=function(k){'use strict';return this.getComposerData(k).minutiaeTaggedPlace};j.prototype.getIsTimeline=function(k){'use strict';return this.getComposerData(k).isTimeline};j.prototype.isFetching=function(k){'use strict';return this.getComposerData(k).isFetching};j.prototype.$ReactComposerLocationAttachmentStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','enabled']),m=l[0],n=l[1],o=this.getComposerData(m);o.isEnabled=n};j.prototype.$ReactComposerLocationAttachmentStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','locationID','targetID']),m=l[0],n=l[1],o=l[2];if(!this.isEnabled(m))return;var p=this.getComposerData(m);p.isFetching=true;var q=c('XReactComposerLocationAttachmentController').getURIBuilder().setString('composer_id',m).setString('location_id',n).setString('target_id',o).getURI();p.pendingRequest=new (c('AsyncRequest'))(q).setFinallyHandler(function(){p.isFetching=false;p.pendingRequest=null;this.emitChange(m)}.bind(this));p.pendingRequest.send();this.emitChange(m)};j.prototype.$ReactComposerLocationAttachmentStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','objectID','isTimeline']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.minutiaeTaggedPlace=n;p.isTimeline=o;this.emitChange(m)};j.prototype.$ReactComposerLocationAttachmentStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','markup']),m=l[0],n=l[1],o=this.getComposerData(m);o.markup=n;this.emitChange(m)};j.prototype.$ReactComposerLocationAttachmentStore5=function(k){'use strict';var l=this.validateAction(k,['composerID','id']),m=l[0],n=l[1];if(n===c('ReactComposerAttachmentType').STATUS)return;var o=this.getComposerData(m);o.markup=null;o.isFetching=false;o.pendingRequest&&o.pendingRequest.abandon();this.emitChange(m)};f.exports=new j()}),null);
__d('ReactComposerLocationAttachmentActions',['ReactComposerDispatcher','ReactComposerLocationAttachmentActionType','ReactComposerLocationAttachmentStore'],(function a(b,c,d,e,f,g){c('ReactComposerLocationAttachmentStore');h.prototype.enabled=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').LOCATION_ATTACHMENT_ENABLED,enabled:j})};h.prototype.fetchLocationAttachment=function(i,j,k){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').FETCH_LOCATION_ATTACHMENT,locationID:j,targetID:k})};h.prototype.setMinutiaeActionContext=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerLocationAttachmentActionType').SET_MINUTIAE_ACTION_CONTEXT,objectID:j,isTimeline:k};c('ReactComposerDispatcher').dispatch(l)};h.prototype.setMarkup=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').SET_LOCATION_MARKUP,markup:j})};function h(){'use strict'}f.exports=new h()}),null);
__d('ReactComposerMinutiaeAttachmentActions',['ReactComposerDispatcher','ReactComposerMinutiaeAttachmentActionType','ReactComposerMinutiaeAttachmentStore'],(function a(b,c,d,e,f,g){c('ReactComposerMinutiaeAttachmentStore');h.prototype.fetchMinutiaeAttachment=function(i,j,k,l,m,n){'use strict';var o={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').FETCH_ATTACHMENT,actionID:j,objectID:k,targetID:l,actorID:m,isTimeline:n};c('ReactComposerDispatcher').dispatch(o)};h.prototype.setExplicitLocation=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').SET_EXPLICIT_LOCATION,explicitLocation:j};c('ReactComposerDispatcher').dispatch(k)};h.prototype.setMarkup=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').SET_MARKUP,markup:j};c('ReactComposerDispatcher').dispatch(k)};h.prototype.setHideAttachment=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').SET_HIDE_OBJECT_ATTACHMENT,hideAttachment:j};c('ReactComposerDispatcher').dispatch(k)};function h(){'use strict'}f.exports=new h()}),null);
__d('ReactComposerAttachmentPreviewContainer.react',['csx','cx','fbt','Arbiter','DOM','Event','React','ReactComponentWithPureRenderMixin','ReactComposerAttachmentPreview.react','ReactComposerEvents','ReactComposerLocationAttachmentActions','ReactComposerLocationAttachmentStore','ReactComposerLoggingName','ReactComposerMinutiaeAttachmentActions','ReactComposerMinutiaeAttachmentStore','ReactComposerPrefillStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTaggerActions','ReactComposerWorkFileStore','ReactDOM','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i,j){var k=c('ReactComposerWorkFileStore').module,l=c('React').PropTypes,m=[c('ReactComposerScrapedAttachmentStore'),c('ReactComposerMinutiaeAttachmentStore'),c('ReactComposerLocationAttachmentStore')];if(k)m.push(k);var n=c('React').createClass({displayName:'ReactComposerAttachmentPreviewContainer',_buttonEvent:undefined,_prefillSubscription:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin').apply(undefined,m)],propTypes:{markup:l.instanceOf(HTMLElement),spinner:l.element},statics:{calculateState:function o(p,q){var r,s=c('ReactComposerScrapedAttachmentStore').getMarkup(p),t=c('ReactComposerScrapedAttachmentStore').isReadOnly(p),u=c('ReactComposerMinutiaeAttachmentStore').getMarkup(p),v=c('ReactComposerLocationAttachmentStore').getMarkup(p),w=c('ReactComposerScrapedAttachmentStore').isScraping(p)||c('ReactComposerMinutiaeAttachmentStore').isFetching(p)||c('ReactComposerLocationAttachmentStore').isFetching(p),x=null;if(k)(function(){var aa=c('ReactComposerScrapedAttachmentStore').getPermissiveMatch(p),ba=k.getSelectedAppsFiles(p).find(function(ca){return ca.url===aa});x=ba?ba.name:null})();var y=c('ReactComposerTaggerStore').hasData(p,c('ReactComposerTaggerType').FUN_FACT),z=c('ReactComposerTaggerStore').hasData(p,c('ReactComposerTaggerType').FUNDRAISER);if(y||z){u=null;v=null;w=c('ReactComposerScrapedAttachmentStore').isScraping(p)}return {markup:s||u||v,showSpinner:w,showRemoveButton:s&&t,title:x}}},componentDidMount:function o(){this._prefillSubscription=c('Arbiter').subscribe(c('ReactComposerEvents').SET_PREFILL_DATA+this.context.composerID,this._handlePrefill);this._cleanupButtonEvent();this._setButtonEvent()},componentDidUpdate:function o(){this._setButtonEvent()},componentWillUnmount:function o(){this._prefillSubscription&&this._prefillSubscription.unsubscribe();this._prefillSubscription=null;this._cleanupButtonEvent()},render:function o(){var p=this.state.markup?c('React').createElement('div',{className:"_2ane"},c('React').createElement(c('ReactComposerAttachmentPreview.react'),{ref:'attachment',markup:this.state.markup}),this._renderRemoveButton()):null;return c('React').createElement('div',{'data-testid':'attachment-preview'},this._renderSpinner(),p)},_handlePrefill:function o(){var p=c('ReactComposerPrefillStore').getAndEraseField(this.context.composerID,'attachmentPreviewData');if(p)if(p.scrapedAttachment){if(p.scrapedAttachment.markup){c('ReactComposerScrapedAttachmentActions').setScrapedAttachmentWithoutLogging(this.context.composerID,p.scrapedAttachment.markup,p.scrapedAttachment.attachmentConfig)}else if(p.minutiaeAttachment.markup)c('ReactComposerMinutiaeAttachmentActions').setMarkup(this.context.composerID,p.minutiaeAttachment.markup);}else if(p.scrapedURL)c('ReactComposerScrapedAttachmentActions').scrapeAttachment(this.context.composerID,this.context.targetID,p.scrapedURL,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);},_renderRemoveButton:function o(){if(!this.state.markup||!this.state.showRemoveButton)return null;return c('React').createElement('div',{className:"_2anf"},c('React').createElement(c('XUICloseButton.react'),{className:"_2anh",size:'medium',shade:'light',onClick:this._clearAttachment}))},_renderSpinner:function o(){if(!this.state.showSpinner)return null;var p=this.state.title?c('React').createElement('span',{className:"_239x"},this.state.title):null;return c('React').createElement('div',{className:"_239z"},this.props.spinner,c('React').createElement('div',{className:"_3-8y"},p,j._("Fetching preview")))},_setButtonEvent:function o(){if(this.refs.attachment){var p=c('DOM').scry(c('ReactDOM').findDOMNode(this.refs.attachment),"._9s")[0];if(p)this._buttonEvent=c('Event').listen(p,'click',function(event){event.preventDefault();this._clearAttachment();this._buttonEvent&&this._buttonEvent.remove();this._buttonEvent=null}.bind(this));c('Arbiter').inform('react_composer_dom_ready/'+this.context.composerID)}},_clearAttachment:function o(){c('ReactComposerScrapedAttachmentActions').setScrapedAttachment(this.context.composerID,null,{},c('ReactComposerLoggingName').LINK_REMOVE_BUTTON);c('ReactComposerMinutiaeAttachmentActions').setMarkup(this.context.composerID,null);c('ReactComposerLocationAttachmentActions').setMarkup(this.context.composerID,null);c('ReactComposerTaggerActions').setTaggerData(this.context.composerID,c('ReactComposerLoggingName').LINK_REMOVE_BUTTON,c('ReactComposerTaggerType').GIF,{hasGIF:false});c('ReactComposerMinutiaeAttachmentActions').setHideAttachment(this.context.composerID,true)},_cleanupButtonEvent:function o(){this._buttonEvent&&this._buttonEvent.remove()}});f.exports=n}),null);
__d('ReactComposerPeopleTaggerTokenizerToken.react',['cx','React','SearchableEntry','TokenizerToken.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.$ReactComposerPeopleTaggerTokenizerToken1=function(){'use strict';return c('React').createElement('span',{className:"_jsa"})};l.prototype.render=function(){'use strict';var m=this.props.entry&&this.props.entry.getAuxiliaryData().isFacebox,n=(m?"_jsb":'')+(' '+"_jsc");return c('React').createElement(c('TokenizerToken.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,n),glyph:this.$ReactComposerPeopleTaggerTokenizerToken1()}))};function l(){'use strict';i.apply(this,arguments)}l.propTypes={label:k.string.isRequired,entry:k.instanceOf(c('SearchableEntry')).isRequired,onRemove:k.func,highlighted:k.bool};f.exports=l}),null);
__d("ComposerPerfEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CLIENT_BOOTSTRAPPED:"client_bootstrapped",CLIENT_BOOTLOADED:"client_bootloaded",CLIENT_POST_SUCCEEDED:"client_post_succeeded",CLIENT_POST_FAILED:"client_post_failed"})}),null);
__d("ExtensibleSproutsLayoutStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXPANDED_DEFAULT:"expanded_default",COLLAPSED:"collapsed",FULL_SCREEN:"full_screen",EXPANDED:"expanded"})}),null);
__d("FacerecWaterfallEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RECOGNITION_RECEIVED_BY_CLIENT:"recognition_received_by_client",CLIENT_RECOGNITION_POLLER_TIMEOUT:"client_recognition_poller_timeout",CLIENT_RECOGNITION_POLLER_GIVE_UP:"client_recognition_poller_give_up",SERVER_PHOTO_PUBLISHED:"server_photo_published",SERVER_PHOTO_TAG_ADDED:"sever_photo_tag_added",SERVER_RECOGNITION_OF_PHOTO_POLLED:"server_recognition_of_photo_polled",SERVER_RECOGNITION_OF_FACE_BOX_RETURNED:"server_recognition_of_face_box_returned",CLIENT_PHOTO_PUBLISHED:"client_photo_published"})}),null);
__d('ReactComposerPerfLogger',['ComposerType','ComposerXSessionIDs','MarauderLogger'],(function a(b,c,d,e,f,g){var h={},i=c('ComposerType').STATUS,j={logEvent:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],o=h[m],p=c('ComposerXSessionIDs').getSessionID(m);if(!o||!p)return;if(n.logOncePerSession){if(!o.loggedEventTypes[p])o.loggedEventTypes[p]={};if(o.loggedEventTypes[p][l])return;o.loggedEventTypes[p][l]=true}var q=babelHelpers['extends']({},n.extraData,{composer_type:i,target_type:o.targetType,target_id:o.targetID,ref:o.entryPointRef});c('MarauderLogger').log(l,'composer',q,undefined,undefined,p)},registerComposer:function k(l,m,n,o){h[l.id]={targetID:o,targetType:m,entryPointRef:n,loggedEventTypes:{}}},getInstance:function k(l){return h[l]}};f.exports=j}),null);
__d('ReactComposerLoggingStore',['invariant','Bootloader','ComposerEntryPointRef','ComposerPerfEvent','ComposerWaterfallEvent','ComposerXMarauderLogger','ComposerXSessionIDs','FacerecWaterfallEvent','immutable','PhotosUploadWaterfallXMixin','PhotoUploadFacerecWaterfallTypedLogger','PUWApplications','PUWMethods','PUWSteps','ReactComposerActionTypes','ReactComposerAlbumActionType','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerAudienceActionTypes','ReactComposerAudienceStore','ReactComposerCollectionsActionTypes','ReactComposerDispatcher','ReactComposerFeatureType','ReactComposerLoggingQueue','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPerfLogger','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerScrapedAttachmentActionType','ReactComposerScrapedAttachmentStore','ReactComposerStatusStore','ReactComposerStore','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerVideoUploadActionType','ReactComposerSproutsDisplayState','ExtensibleSproutsItemType','ExtensibleSproutsLayoutStateType','classWithMixins','ifRequired','mixin','nullthrows','performanceAbsoluteNow'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('classWithMixins')(c('ReactComposerStoreBase'),c('mixin')(c('PhotosUploadWaterfallXMixin'))));j=i&&i.prototype;function k(){var l;j.constructor.call(this,function(){return {activated:false,perfTimes:{},sessionID:null,uniqueEvents:c('immutable').Map([[c('PUWSteps').CLIENT_PUBLISH_SUCCESS,false],[c('PUWSteps').CLIENT_FLOW_SUCCESS,false]])}},function(m){l&&l.handler(m)});l=this}k.prototype.handler=function(l){if(l.suppressWaterfallLogging)return;var m=this.getComposerData(l.composerID);if(!m.activated)return;switch(l.type){case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:this.$ReactComposerLoggingStore1(l);break;case c('ReactComposerActionTypes').COMPOSER_ENTRY:this.$ReactComposerLoggingStore2(l);break;case c('ReactComposerAttachmentActionType').SET_BOOTLOADED:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerAttachmentStore').getDispatchToken()]);this.$ReactComposerLoggingStore3(l);break;case c('ReactComposerAttachmentActionType').SET_BOOTSTRAPPED:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerAttachmentStore').getDispatchToken()]);this.$ReactComposerLoggingStore4(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_CLICKED:this.$ReactComposerLoggingStore5(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_DONE:this.$ReactComposerLoggingStore6(l);break;case c('ReactComposerAlbumActionType').CREATE_ALBUM_SELECTOR_CLICKED:this.$ReactComposerLoggingStore7(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED:this.$ReactComposerLoggingStore8(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED:this.$ReactComposerLoggingStore9(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE:this.$ReactComposerLoggingStore10(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED:this.$ReactComposerLoggingStore11(l);break;case c('ReactComposerMediaUploadActionType').SPHERICAL_PHOTO_CHECK_DONE:this.$ReactComposerLoggingStore12(l);break;case c('ReactComposerMediaUploadActionType').SPHERICAL_PHOTO_CHECK_FAILED:this.$ReactComposerLoggingStore13(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZER_UNAVAILABLE:this.$ReactComposerLoggingStore14(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING:this.$ReactComposerLoggingStore15(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:this.$ReactComposerLoggingStore16(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED:this.$ReactComposerLoggingStore17(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE:this.$ReactComposerLoggingStore18(l);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:this.$ReactComposerLoggingStore19(l);break;case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_ENQUEUED:this.$ReactComposerLoggingStore20(l);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_ADD:this.$ReactComposerLoggingStore21(l);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_REMOVE:this.$ReactComposerLoggingStore22(l);break;case c('ReactComposerTaggerActionType').DESELECT_TAGGER:this.$ReactComposerLoggingStore23(l);break;case c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerTaggerStore').getDispatchToken()]);this.$ReactComposerLoggingStore24(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_DATA:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerTaggerStore').getDispatchToken()]);this.$ReactComposerLoggingStore25(l);break;case c('ReactComposerActionTypes').POST_STARTED:this.$ReactComposerLoggingStore26(l);break;case c('ReactComposerActionTypes').POST_SUCCEEDED:this.$ReactComposerLoggingStore27(l);break;case c('ReactComposerActionTypes').POST_ERROR:this.$ReactComposerLoggingStore28(l);break;case c('ReactComposerMediaUploadActionType').PHOTOS_SELECT:this.$ReactComposerLoggingStore29(l);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED:this.$ReactComposerLoggingStore30(l);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_FINISHED:this.$ReactComposerLoggingStore31(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RETRY:this.$ReactComposerLoggingStore32(l);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:this.$ReactComposerLoggingStore33(l);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED:this.$ReactComposerLoggingStore34(l);break;case c('ReactComposerActionTypes').FEATURE_INTENT:this.$ReactComposerLoggingStore35(l);break;case c('ReactComposerActionTypes').FEATURE_DONE:this.$ReactComposerLoggingStore36(l);break;case c('ReactComposerActionTypes').FEATURE_CANCEL:this.$ReactComposerLoggingStore37(l);break;case c('ReactComposerActionTypes').SPROUT_VIEW_UPDATE:this.$ReactComposerLoggingStore38(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerScrapedAttachmentStore').getDispatchToken()]);this.$ReactComposerLoggingStore39(l);break;case c('ReactComposerAudienceActionTypes').SET_AUDIENCE:this.$ReactComposerLoggingStore40(l);break;case c('ReactComposerActionTypes').COMPOSER_CANCEL:this.$ReactComposerLoggingStore41(l);break;case c('ReactComposerActionTypes').COMPOSER_NAVIGATE_AWAY_ATTEMPT:this.$ReactComposerLoggingStore42(l);break;case c('ReactComposerCollectionsActionTypes').SHOW_COLLECTION_SELECTOR:this.$ReactComposerLoggingStore43(l);break;case c('ReactComposerCollectionsActionTypes').HIDE_COLLECTION_SELECTOR:this.$ReactComposerLoggingStore44(l);break;case c('ReactComposerAudienceActionTypes').SET_COLLECTION:if(c('ReactComposerDispatcher').isDispatching())c('ReactComposerDispatcher').waitFor([c('ReactComposerAudienceStore').getDispatchToken()]);this.$ReactComposerLoggingStore45(l);break;case c('ReactComposerCollectionsActionTypes').SHOW_CREATION_LAYER:this.$ReactComposerLoggingStore46(l);break;case c('ReactComposerCollectionsActionTypes').HIDE_CREATION_LAYER:this.$ReactComposerLoggingStore47(l);break;default:}};k.prototype.getSessionID=function(l){return c('ComposerXSessionIDs').getSessionID(l)};k.prototype.isActivated=function(l){return this.getComposerData(l).activated};k.prototype.activate=function(l){var m=this.getComposerData(l);m.activated=true;if(c('ReactComposerLoggingQueue').getLength()>0)this.$ReactComposerLoggingStore48();};k.prototype.$ReactComposerLoggingStore2=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').COMPOSER_ENTRY,{logOncePerSession:true,extraData:{composer_entry_point_name:l.uiElementName}})};k.prototype.$ReactComposerLoggingStore35=function(l){var m=this.validateAction(l,['composerID','featureType','uiElementName']),n=m[0],o=m[1],p=m[2];this.$ReactComposerLoggingStore50(n,o,p)};k.prototype.$ReactComposerLoggingStore36=function(l){var m=this.validateAction(l,['composerID','featureType','uiElementName']),n=m[0],o=m[1],p=m[2];this.$ReactComposerLoggingStore51(n,o,p)};k.prototype.$ReactComposerLoggingStore37=function(l){var m=this.validateAction(l,['composerID','featureType','uiElementName']),n=m[0],o=m[1],p=m[2];this.$ReactComposerLoggingStore52(n,o,p)};k.prototype.$ReactComposerLoggingStore1=function(l){var m=this.validateAction(l,'composerID');if(c('ReactComposerAttachmentStore').isSelectedAttachmentActive(m))this.$ReactComposerLoggingStore2(l);if(l.loggingName&&Object.prototype.hasOwnProperty.call(c('ExtensibleSproutsItemType'),l.loggingName))this.$ReactComposerLoggingStore50(m,l.loggingName,l.loggingName);};k.prototype.$ReactComposerLoggingStore3=function(l){var m=this.validateAction(l,['id','composerID']),n=m[0],o=m[1];this.$ReactComposerLoggingStore53(o,c('ComposerPerfEvent').CLIENT_BOOTLOADED,{extraData:{attachment_type:n,duration:c('ReactComposerAttachmentStore').getBootloadDuration(o,n)}})};k.prototype.$ReactComposerLoggingStore4=function(l){var m=this.validateAction(l,['id','composerID']),n=m[0],o=m[1];this.$ReactComposerLoggingStore53(o,c('ComposerPerfEvent').CLIENT_BOOTSTRAPPED,{extraData:{attachment_type:n,duration:c('ReactComposerAttachmentStore').getBootstrapDuration(o,n)}})};k.prototype.$ReactComposerLoggingStore7=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').ALBUM_INTENT)};k.prototype.$ReactComposerLoggingStore5=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore50(n,c('ExtensibleSproutsItemType').MEDIA,o);this.$ReactComposerLoggingStore49(n,c('ComposerWaterfallEvent').MEDIA_INTENT);this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_SELECT_BEGIN)};k.prototype.$ReactComposerLoggingStore6=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore51(n,c('ExtensibleSproutsItemType').MEDIA,o)};k.prototype.$ReactComposerLoggingStore8=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').PHOTO_ADD);this.$ReactComposerLoggingStore55(m,c('ExtensibleSproutsItemType').MEDIA)};k.prototype.$ReactComposerLoggingStore9=function(l){var m=this.validateAction(l,['composerID','loggingData']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_PROCESS_BEGIN,o)};k.prototype.$ReactComposerLoggingStore10=function(l){var m=this.validateAction(l,['composerID','loggingData']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_PROCESS_SUCCESS,o)};k.prototype.$ReactComposerLoggingStore11=function(l){var m=this.validateAction(l,['composerID','loggingData']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_PROCESS_FAIL,o)};k.prototype.$ReactComposerLoggingStore12=function(l){var m=this.validateAction(l,['composerID','loggingData']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_SPHERICAL_CHECK_SUCCESS,o)};k.prototype.$ReactComposerLoggingStore13=function(l){var m=this.validateAction(l,['composerID','loggingData']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_SPHERICAL_CHECK_FAIL,o)};k.prototype.$ReactComposerLoggingStore14=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_PROCESS_UNAVAILABLE)};k.prototype.$ReactComposerLoggingStore15=function(l){var m=this.validateAction(l,['composerID','fileUpload']),n=m[0],o=m[1];this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_TRANSFER_BEGIN,{bytes:o.getFile().size})};k.prototype.$ReactComposerLoggingStore16=function(l){var m=this.validateAction(l,['composerID','fileUpload','timeToUpload']),n=m[0],o=m[1],p=m[2],q={};if(l.uploadID&&c('ReactComposerMediaUploadStore').getMediaUploadExists(n,l.uploadID))q=c('ReactComposerMediaUploadStore').getMediaUpload(n,l.uploadID);this.$ReactComposerLoggingStore49(n,c('ComposerWaterfallEvent').PHOTO_ADD_SUCCESS);this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_TRANSFER_SUCCESS,{bytes:o.getFile().size,auto_retry_count:o.getRetryCount(),dt:p,custom_tags:{manual_retry:!!o.getFile().manuallyRetried},projection_type:q.projectionType,fbid:l.photoID,sheight:q.height,swidth:q.width,theight:l.height,twidth:l.width})};k.prototype.$ReactComposerLoggingStore17=function(l){var m=this.validateAction(l,['composerID','fileUpload','error','timeToUpload']),n=m[0],o=m[1],p=m[2],q=m[3],r={};if(l.uploadID&&c('ReactComposerMediaUploadStore').getMediaUploadExists(n,l.uploadID))r=c('ReactComposerMediaUploadStore').getMediaUpload(n,l.uploadID);this.$ReactComposerLoggingStore49(n,c('ComposerWaterfallEvent').PHOTO_ADD_FAILURE);this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_TRANSFER_FAIL,{bytes:o.getFile().size,error_code:p.code,error_info:p.description,auto_retry_count:o.getRetryCount(),dt:q,custom_tags:{manual_retry:!!o.getFile().manuallyRetried},projection_type:r.projectionType,sheight:r.height,swidth:r.width})};k.prototype.$ReactComposerLoggingStore18=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').PHOTO_REMOVE);this.$ReactComposerLoggingStore55(m,c('ExtensibleSproutsItemType').MEDIA);this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_TRANSFER_CANCEL)};k.prototype.$ReactComposerLoggingStore19=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').PHOTO_REMOVE);this.$ReactComposerLoggingStore55(m,c('ExtensibleSproutsItemType').MEDIA)};k.prototype.$ReactComposerLoggingStore20=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore55(m,c('ExtensibleSproutsItemType').MEDIA)};k.prototype.$ReactComposerLoggingStore21=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').VIDEO_ADD)};k.prototype.$ReactComposerLoggingStore22=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').VIDEO_REMOVE);this.$ReactComposerLoggingStore55(m,c('ExtensibleSproutsItemType').MEDIA)};k.prototype.$ReactComposerLoggingStore23=function(l){var m=this.validateAction(l,['composerID','taggerID','sourceLoggingName']),n=m[0],o=m[1],p=m[2],q=this.$ReactComposerLoggingStore56(o);q!==null||h(0);if(q)this.$ReactComposerLoggingStore51(n,q,p);};k.prototype.$ReactComposerLoggingStore24=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1],p=c('ReactComposerTaggerStore').getSelectedTagger(n),event=null;switch(p){case c('ReactComposerTaggerType').PEOPLE:this.$ReactComposerLoggingStore50(n,c('ExtensibleSproutsItemType').WITH_TAG,o);event=c('ComposerWaterfallEvent').FRIEND_TAG_INTENT;break;case c('ReactComposerTaggerType').LOCATION:this.$ReactComposerLoggingStore50(n,c('ExtensibleSproutsItemType').LOCATION,o);event=c('ComposerWaterfallEvent').LOCATION_INTENT;break;case c('ReactComposerTaggerType').ACTIVITY:this.$ReactComposerLoggingStore50(n,c('ExtensibleSproutsItemType').MINUTIAE,o);event=c('ComposerWaterfallEvent').MINUTIAE_INTENT;break;case c('ReactComposerTaggerType').MARKDOWN:event=c('ComposerWaterfallEvent').MARKDOWN_INTENT;break;default:var q=this.$ReactComposerLoggingStore56(p);if(q)this.$ReactComposerLoggingStore50(n,q,o);break;}if(event===null)return;this.$ReactComposerLoggingStore49(n,event)};k.prototype.$ReactComposerLoggingStore25=function(l){var m=this.validateAction(l,['composerID','taggerID','sourceLoggingName']),n=m[0],o=m[1],p=m[2],q=this.$ReactComposerLoggingStore56(o);q!==null||h(0);if(q)this.$ReactComposerLoggingStore55(n,q,p);};k.prototype.$ReactComposerLoggingStore26=function(l){var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);n.perfTimes.postStartTime=c('performanceAbsoluteNow')();this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').COMPOSER_POST);if(this.$ReactComposerLoggingStore57(m)){this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_PUBLISH_BEGIN,this.$ReactComposerLoggingStore58(m));c('ReactComposerPhotoStore').getPhotos(m).forEach(function(o){o.faceboxes.forEach(function(p){return new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('FacerecWaterfallEvent').CLIENT_PHOTO_PUBLISHED).setPhotoFbid(o.id).setFaceBoxID(p.id).setRecognizedUser(p.recognizedSubjectID).setTaggedUser(p.taggedSubjectID).log()})})}this.$ReactComposerLoggingStore59(m,'post')};k.prototype.$ReactComposerLoggingStore27=function(l){var m,n=this,o=this.validateAction(l,'composerID'),p=this.getComposerData(o);this.$ReactComposerLoggingStore49(o,c('ComposerWaterfallEvent').COMPOSER_POST_SUCCESS);this.$ReactComposerLoggingStore53(o,c('ComposerPerfEvent').CLIENT_POST_SUCCEEDED,{extraData:{attachment_type:c('ReactComposerAttachmentStore').getSelectedAttachmentID(o),duration:c('performanceAbsoluteNow')()-p.perfTimes.postStartTime}});if(this.$ReactComposerLoggingStore57(o)){var q=this.$ReactComposerLoggingStore58(o);this.$ReactComposerLoggingStore54(o,c('PUWSteps').CLIENT_PUBLISH_SUCCESS,q);this.$ReactComposerLoggingStore54(o,c('PUWSteps').CLIENT_FLOW_SUCCESS);var r=c('ReactComposerPhotoStore').getPhotos(o);if(r&&r.forEach)(function(){var s=0;r.forEach(function(t){if(t.cubestripURI)s++;});if(s>0)c('Bootloader').loadModules(["SphericalPhotoViewerLoggerUtil","SphericalMediaConstants"],function(t,u){t.logNumberOfSphericalPhoto({composerSessionID:this.getSessionID(o)||'',surface:u.LOGGER_SURFACES.composer,numberOfSphericalPhoto:s})}.bind(n),'ReactComposerLoggingStore');})();}};k.prototype.$ReactComposerLoggingStore28=function(l){var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').COMPOSER_POST_FAILURE);this.$ReactComposerLoggingStore53(m,c('ComposerPerfEvent').CLIENT_POST_FAILED,{extraData:{attachment_type:c('ReactComposerAttachmentStore').getSelectedAttachmentID(m),duration:c('performanceAbsoluteNow')()-n.perfTimes.postStartTime}});if(this.$ReactComposerLoggingStore57(m)){var o=l.response,p=Object.assign(this.$ReactComposerLoggingStore58(m),{error_code:o&&o.getError&&o.getError(),error_info:o&&o.getErrorDescription&&o.getErrorDescription()});this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_PUBLISH_FAIL,p)}};k.prototype.$ReactComposerLoggingStore29=function(l){var m=this.validateAction(l,['composerID','numPhotos','method']),n=m[0],o=m[1],p=m[2],q={method:p,volume:o};this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});if(p!==c('PUWMethods').FILE_SELECTOR)this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_SELECT_BEGIN);this.$ReactComposerLoggingStore54(n,c('PUWSteps').CLIENT_SELECT_SUCCESS,q)};k.prototype.$ReactComposerLoggingStore30=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_PHOTO_EDIT_BEGIN)};k.prototype.$ReactComposerLoggingStore31=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_PHOTO_EDIT_SUCCESS)};k.prototype.$ReactComposerLoggingStore32=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore54(m,c('PUWSteps').CLIENT_TRANSFER_MANUAL_RETRY)};k.prototype.$ReactComposerLoggingStore33=function(l){var m=this.validateAction(l,['photoID','facebox']),n=m[0],o=m[1],p=o.bestRecognition,q=null;if(p)q=p.subjectID;new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('FacerecWaterfallEvent').RECOGNITION_RECEIVED_BY_CLIENT).setPhotoFbid(n).setFaceBoxID(o.id).setRecognizedUser(q).log()};k.prototype.$ReactComposerLoggingStore34=function(l){var m=this.validateAction(l,['photos','facerecWaterfallEvent']),n=m[0],o=m[1];n.forEach(function(p){new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('nullthrows')(o)).setPhotoFbid(p).log()})};k.prototype.$ReactComposerLoggingStore39=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore55(m,c('ReactComposerFeatureType').LINK,l.sourceLoggingName)};k.prototype.$ReactComposerLoggingStore40=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore55(m,c('ReactComposerFeatureType').PRIVACY,l.sourceLoggingName)};k.prototype.$ReactComposerLoggingStore41=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore49(m,c('ComposerWaterfallEvent').COMPOSER_CANCEL)};k.prototype.$ReactComposerLoggingStore42=function(l){var m=this.validateAction(l,'composerID');this.$ReactComposerLoggingStore59(m,'cancel')};k.prototype.$ReactComposerLoggingStore43=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore50(n,c('ReactComposerFeatureType').COLLECTIONS,o)};k.prototype.$ReactComposerLoggingStore44=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore51(n,c('ReactComposerFeatureType').COLLECTIONS,o)};k.prototype.$ReactComposerLoggingStore45=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore55(n,c('ReactComposerFeatureType').COLLECTIONS,o)};k.prototype.$ReactComposerLoggingStore46=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName']),n=m[0],o=m[1];this.$ReactComposerLoggingStore50(n,c('ReactComposerFeatureType').COLLECTION_CREATION,o)};k.prototype.$ReactComposerLoggingStore47=function(l){var m=this.validateAction(l,['composerID','sourceLoggingName','isCancel']),n=m[0],o=m[1],p=m[2],q=p?this.$ReactComposerLoggingStore52.bind(this):this.$ReactComposerLoggingStore51.bind(this);q(n,c('ReactComposerFeatureType').COLLECTION_CREATION,o)};k.prototype.$ReactComposerLoggingStore38=function(l){var m=this.validateAction(l,['composerID','visibilityMap','event']),n=m[0],o=m[1],event=m[2];this.$ReactComposerLoggingStore49(n,event,{extraData:{sprouts_visibilities:o}})};k.prototype.$ReactComposerLoggingStore57=function(l){var m=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').MEDIA),n=c('ReactComposerMediaUploadStore').getUploadsOfType(l,c('ReactComposerMediaUploadType').PHOTO);return m&&!!n.size};k.prototype.$ReactComposerLoggingStore58=function(l){var m=c('ReactComposerTaggerStore').getTaggerData(l,c('ReactComposerTaggerType').PEOPLE)||[],n=c('ReactComposerMediaUploadStore').getTotalNumberOfStickersOnPhotos(l);return {volume:c('ReactComposerPhotoStore').getPhotos(l).size,with_tag_count:m.length,sticker_count:n}};k.prototype.$ReactComposerLoggingStore50=function(l,m,n){this.$ReactComposerLoggingStore49(l,c('ComposerWaterfallEvent').FEATURE_INTENT,{extraData:{feature_type:m,source:n}})};k.prototype.$ReactComposerLoggingStore55=function(l,m,n){this.$ReactComposerLoggingStore49(l,c('ComposerWaterfallEvent').FEATURE_UPDATE,{extraData:{feature_type:m,source:n}})};k.prototype.$ReactComposerLoggingStore52=function(l,m,n){this.$ReactComposerLoggingStore49(l,c('ComposerWaterfallEvent').FEATURE_CANCEL,{extraData:{feature_type:m,source:n}})};k.prototype.$ReactComposerLoggingStore51=function(l,m,n){this.$ReactComposerLoggingStore49(l,c('ComposerWaterfallEvent').FEATURE_DONE,{extraData:{feature_type:m,source:n}})};k.prototype.$ReactComposerLoggingStore49=function(l,event){var m=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],n=this.getComposerData(l);if(n.uniqueEvents.has(event)){if(n.uniqueEvents.get(event))return;n.uniqueEvents=n.uniqueEvents.set(event,true)}if(c('ReactComposerStore').getRef(l)===c('ComposerEntryPointRef').RECENT_POSTS)c('Bootloader').loadModules(["FeedbackDigestNotifTypedLogger"],function(o){new o().setComposerWaterfallEvent(event).addToExtraData('payload',JSON.stringify(this.$ReactComposerLoggingStore60(l))).addToExtraData('message',c('ReactComposerStatusStore').getMessageText(l)).log()}.bind(this),'ReactComposerLoggingStore');m.extraData=Object.assign({is_markdown_enabled:!!c('ReactComposerTaggerStore').getTaggerData(l,c('ReactComposerTaggerType').MARKDOWN).isMarkdown,payload:this.$ReactComposerLoggingStore60(l),ordered_sprouts:c('ReactComposerStore').getOrderedSprouts(l),ranker_request_id:c('ReactComposerStore').getRankerRequestID(l),state:c('ReactComposerStore').getSproutsDisplayState(l)===c('ReactComposerSproutsDisplayState').INLINE?c('ExtensibleSproutsLayoutStateType').COLLAPSED:c('ExtensibleSproutsLayoutStateType').EXPANDED_DEFAULT},m.extraData);c('ComposerXMarauderLogger').logEvent(event,l,m)};k.prototype.$ReactComposerLoggingStore53=function(l,event){var m=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],n=this.getComposerData(l);if(n.uniqueEvents.has(event)){if(n.uniqueEvents.get(event))return;n.uniqueEvents=n.uniqueEvents.set(event,true)}c('ReactComposerPerfLogger').logEvent(event,l,m)};k.prototype.$ReactComposerLoggingStore54=function(l,m,n,o,p){var q=this.getComposerData(l);if(q.uniqueEvents.has(m)){if(q.uniqueEvents.get(m))return;q.uniqueEvents=q.uniqueEvents.set(m,true)}this.logPUWStep(m,this.getSessionID(l),c('PUWApplications').WEB_REACT_COMPOSER,c('ReactComposerStore').getRef(l),n,o,p)};k.prototype.$ReactComposerLoggingStore48=function(){while(c('ReactComposerLoggingQueue').getLength()>0){var l=c('ReactComposerLoggingQueue').pop();this.handler(l)}};k.prototype.$ReactComposerLoggingStore60=function(l){return {character:c('ReactComposerStatusStore').getTextLength(l),location_tag:c('ReactComposerTaggerStore').hasLocationTag(l),implicit_location:c('ReactComposerTaggerStore').hasImplicitLocation(l),minutiae:c('ReactComposerTaggerStore').hasMinutiae(l),with_who_tag:c('ReactComposerTaggerStore').getNumberOfWithWhoTags(l),photo:c('ReactComposerMediaUploadStore').getNonsphericalPhotoCount(l),three_sixty_photo:c('ReactComposerMediaUploadStore').getSphericalPhotoCount(l),video:c('ReactComposerMediaUploadStore').getUploadsCount(l,c('ReactComposerMediaUploadType').VIDEO),shared_link:c('ReactComposerScrapedAttachmentStore').hasAttachment(l)?1:0,backdated:c('ReactComposerTaggerStore').hasBackdate(l)?c('ReactComposerTaggerStore').getTaggerData(l,c('ReactComposerTaggerType').BACKDATE):null,audience:c('ReactComposerAudienceStore').getAudience(l),collection:c('ReactComposerAudienceStore').getCollectionID(l)}};k.prototype.$ReactComposerLoggingStore56=function(l){switch(l){case c('ReactComposerTaggerType').PEOPLE:return c('ExtensibleSproutsItemType').WITH_TAG;case c('ReactComposerTaggerType').LOCATION:return c('ExtensibleSproutsItemType').LOCATION;case c('ReactComposerTaggerType').ACTIVITY:return c('ExtensibleSproutsItemType').MINUTIAE;case c('ReactComposerTaggerType').MARKDOWN:return c('ExtensibleSproutsItemType').MARKDOWN;case c('ReactComposerTaggerType').BACKDATE:return c('ExtensibleSproutsItemType').BACKDATE;case c('ReactComposerTaggerType').SPONSOR:return c('ExtensibleSproutsItemType').SPONSOR_TAG;case c('ReactComposerTaggerType').PRODUCT:return c('ExtensibleSproutsItemType').TAG_PRODUCT;case c('ReactComposerTaggerType').PAGE_CTA:return c('ReactComposerFeatureType').PAGE_CTA;case c('ReactComposerTaggerType').FORMATTED_TEXT:return c('ExtensibleSproutsItemType').TEXT_BACKGROUND;case c('ReactComposerTaggerType').ISSUE_TAG:return c('ReactComposerFeatureType').ISSUE_TAG;case c('ReactComposerTaggerType').STICKER:return c('ExtensibleSproutsItemType').STICKER;case c('ReactComposerTaggerType').GIF:return c('ExtensibleSproutsItemType').GIF;case c('ReactComposerTaggerType').MESSAGING:return c('ReactComposerFeatureType').MESSAGING;case c('ReactComposerTaggerType').CONTACT_YOUR_REPRESENTATIVE:return c('ExtensibleSproutsItemType').CONTACT_YOUR_REPRESENTATIVE;case c('ReactComposerTaggerType').FUN_FACT:return c('ExtensibleSproutsItemType').FUN_FACT;case c('ReactComposerTaggerType').FUNDRAISER:return c('ExtensibleSproutsItemType').FUNDRAISER;case c('ReactComposerTaggerType').ALBUM:return c('ReactComposerFeatureType').ALBUM;case c('ReactComposerTaggerType').VISUAL_POLL:return c('ExtensibleSproutsItemType').VISUAL_POLLS;case c('ReactComposerTaggerType').RECOMMENDATION:return c('ExtensibleSproutsItemType').RECOMMENDATION;case c('ReactComposerTaggerType').SALES_PROMO:return c('ExtensibleSproutsItemType').SALES_PROMO;default:return null;}};k.prototype.$ReactComposerLoggingStore59=function(l,m){c('ifRequired')('ReactComposerFormattedTextStore',function(n){var o=n.getTextFormatPresetID(l)||n.getPrevSelectedTextFormatPresetID(l),p=n.getTrackingString(l);if(o)c('ifRequired')('SATPInteractionsTypedLogger',function(q){new q().setTrackingString(p).setUserActionString(m).setPresetID(o).log()});})};f.exports=new k()}),null);
__d('ReactComposerPromptsActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_MINUTIAE_DATA:null,SET_PROMPT_DATA:null,SET_PROMPT_XHP:null,SET_MEME_CATEGORY_ID:null},'ReactComposerPromptsActionTypes')}),null);
__d('ReactComposerPromptsStore',['ReactComposerPromptsActionTypes','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {promptData:null,promptXHP:null}},function(l){k&&k.handler(l)});k=this}j.prototype.handler=function(k){'use strict';switch(k.type){case c('ReactComposerPromptsActionTypes').SET_MINUTIAE_DATA:this.$ReactComposerPromptsStore1(k);break;case c('ReactComposerPromptsActionTypes').SET_PROMPT_DATA:this.$ReactComposerPromptsStore2(k);break;case c('ReactComposerPromptsActionTypes').SET_PROMPT_XHP:this.$ReactComposerPromptsStore3(k);break;case c('ReactComposerPromptsActionTypes').SET_MEME_CATEGORY_ID:this.$ReactComposerPromptsStore4(k);break;default:}};j.prototype.$ReactComposerPromptsStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','minutiaeData']),m=l[0],n=l[1],o=this.getComposerData(m);o.minutiaeData=n};j.prototype.getMinutiaeData=function(k){'use strict';return this.getComposerData(k).minutiaeData};j.prototype.$ReactComposerPromptsStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','promptData']),m=l[0],n=l[1],o=this.getComposerData(m);o.promptData=n};j.prototype.getPromptData=function(k){'use strict';return this.getComposerData(k).promptData};j.prototype.$ReactComposerPromptsStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','promptXHP']),m=l[0],n=l[1],o=this.getComposerData(m);o.promptXHP=n;this.emitChange(m)};j.prototype.getPromptXHP=function(k){'use strict';return this.getComposerData(k).promptXHP};j.prototype.$ReactComposerPromptsStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','memeCategoryID']),m=l[0],n=l[1],o=this.getComposerData(m);o.memeCategoryID=n};j.prototype.getMemeCategoryID=function(k){'use strict';return this.getComposerData(k).memeCategoryID};f.exports=new j()}),null);
__d('ReactComposerAsyncRequest',['AsyncRequest','ReactComposerActions','ReactComposerPostUtilsCore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AsyncRequest'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,l);this.$ReactComposerAsyncRequest1=k;i.setHandler.call(this,this.$ReactComposerAsyncRequest4.bind(this));i.setErrorHandler.call(this,this.$ReactComposerAsyncRequest5.bind(this));i.setFinallyHandler.call(this,this.$ReactComposerAsyncRequest6.bind(this))}j.prototype.setHandler=function(k){'use strict';this.$ReactComposerAsyncRequest2=k;return this};j.prototype.setErrorHandler=function(k){'use strict';this.$ReactComposerAsyncRequest3=k;return this};j.prototype.$ReactComposerAsyncRequest4=function(k){'use strict';setTimeout(function(){var l=k.payload&&k.payload.isPostPending;if(!l)c('ReactComposerPostUtilsCore').handlePostSucceeded(this.$ReactComposerAsyncRequest1);this.$ReactComposerAsyncRequest2&&this.$ReactComposerAsyncRequest2(k)}.bind(this),0)};j.prototype.$ReactComposerAsyncRequest5=function(k){'use strict';setTimeout(function(){c('ReactComposerActions').postError(this.$ReactComposerAsyncRequest1,k);this.$ReactComposerAsyncRequest3&&this.$ReactComposerAsyncRequest3(k)}.bind(this),0)};j.prototype.$ReactComposerAsyncRequest6=function(k){'use strict';setTimeout(function(){return c('ReactComposerActions').postFinally(this.$ReactComposerAsyncRequest1,k)}.bind(this),0)};f.exports=j}),null);
__d("PhotoEditorLoggingConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_IMAGE_STICKER:"composer_sticker",COMPOSER_IMAGE_TEXT_OVERLAY:"composer_text_overlay",COMPOSER_IMAGE_HAS_CROP:"composer_has_crop",COMPOSER_IMAGE_HAS_FILTER:"composer_has_filter"})}),null);
__d("PlaceAttachmentSetting",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HIDE_ATTACHMENT:1,SHOW_ATTACHMENT:2})}),null);
__d("StorySurfaces",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HOMEPAGE:1,TIMELINE:2,PERMALINK:3,ENTSTREAM:4,GROUP:5})}),null);
__d('ReactComposerPostDataUtils',['ComposerXMarauderLogger','PhotoEditorLoggingConstants','PhotoEditorSaveStates','PlaceAttachmentSetting','PUWApplications','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerAudienceSelectorStore','ReactComposerAudienceStore','ReactComposerLoggingStore','ReactComposerMediaUploadType','ReactComposerMinutiaeAttachmentStore','ReactComposerPhotoStore','ReactComposerPostUtilsCore','ReactComposerPromptsStore','ReactComposerScrapedAttachmentStore','ReactComposerSelectedImagesStore','ReactComposerSessionMetricsStore','ReactComposerSlideshowAudioStore','ReactComposerSlideshowStore','ReactComposerStatusStore','ReactComposerStore','ReactComposerTaggerStore','ReactComposerTaggerType','SlideshowUtil','StorySurfaces','flattenPHPQueryData','ifRequired','isNumberLike'],(function a(b,c,d,e,f,g){var h={getPostData:function i(j){var k=j.composerID,l=j.targetID,m=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').PEOPLE)||[],n=[];m.forEach(function(sb){n.push(sb.getUniqueID())});var o=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').PRODUCT)||[];o=o.filter(function(sb){return !sb.getAuxiliaryData().isFacebox});var p=o.map(function(sb){return sb.getUniqueID()}),q=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').ISSUE_TAG)||[],r=q.map(function(sb){return sb.getUniqueID()}),s=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').CONTACT_YOUR_REPRESENTATIVE),t=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').ACTIVITY),u=[],v=[],w=[],x;if(t&&t.action&&t.object){u.push(t.action.getUniqueID());x=t.actionIconID;if(c('isNumberLike')(t.object.getUniqueID())&&t.object.getUniqueID()!==t.object.getTitle()){v.push(t.object.getUniqueID());w.push('')}else w.push(t.object.getTitle());}else if(s.politicalRepresentative)c('ifRequired')('ContactYourRepresentativeConsts',function(sb){u.push(sb.composer_action_id);v.push(s.politicalRepresentative.getUniqueID());w.push('')});var y=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').STICKER),z=y&&y.stickerID?y.stickerID:0,aa=c('ReactComposerMinutiaeAttachmentStore').getHideObjectAttachment(k),ba=c('ifRequired')('ReactComposerLocationAttachmentStore',function(sb){ba=sb.getMarkup(k)!==null?c('PlaceAttachmentSetting').SHOW_ATTACHMENT:c('PlaceAttachmentSetting').HIDE_ATTACHMENT},function(){return c('PlaceAttachmentSetting').HIDE_ATTACHMENT}),ca=[],da=[],ea='';c('ifRequired')('ReactComposerMultilingualStatusStore',function(sb){ca=sb.getMessages(k);da=sb.getLanguageDialects(k);ea=sb.getSpecifiedPostLanguage(k)});var fa=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').FUN_FACT),ga=fa?fa.promptID:null,ha=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').FUNDRAISER),ia=ha?ha.charityID:null,ja=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').LOCATION),ka=ja?ja.place:null,la;if(c('ReactComposerTaggerStore').hasBackdate(k)){var ma=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').BACKDATE);la={year:this._sanitizeDateField(ma.year),month:this._sanitizeDateField(ma.month),day:this._sanitizeDateField(ma.day),hour:this._sanitizeDateField(ma.hour),minute:this._sanitizeDateField(ma.minute)}}var na=ja&&ja.implicitLocation?ja.implicitLocation.citypageid:null,oa=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').SPONSOR)||{},pa={directShareStatus:oa.directShareStatus,sponsorRelationship:oa.sponsorRelationship,sponsors:[]};oa.sponsors.map(function(sb){pa.sponsors.push(sb.getUniqueID())});var qa=c('ReactComposerAudienceStore').getCollectionID(k),ra=null;if(!qa){var sa=c('ReactComposerAudienceStore').getLegacyAudience(k);if(sa)ra=[{value:sa}];}var ta=j.useHints,ua=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').TARGETING),va=ua&&!qa?ta?ua.hints:ua.targeting:null;if(va!=null){if(!ta&&va.fan_of)va.fan_of=va.fan_of.map(function(sb){return sb.id});c('ifRequired')('AdsAPITargetFields',function(sb){if(sb&&va&&ta&&va[sb.INTERESTS])va[sb.INTERESTS]=va[sb.INTERESTS].map(function(tb){return tb.id});})}var wa=ua&&!qa?ua.gating:null;if(j.composerConfig.contextInfo.stopFeedDistributionDateFormatted){if(!va)va={};va['relevant-until-date']=j.composerConfig.contextInfo.stopFeedDistributionDateFormatted;va['relevant-until-time']=j.composerConfig.contextInfo.stopFeedDistributionTimeFormatted}var xa=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').PUBLISHER_ABTEST_HOLDOUT);if(xa)if(xa.showStart==1&&xa.showEnd==100){xa=null}else xa={showStart:xa.showStart,showEnd:xa.showEnd};var ya=c('ifRequired')('PagesComposerBoostedPostsStore',function(sb){return sb.getConfig(k)},function(){return null}),za=c('ReactComposerScrapedAttachmentStore').getAttachmentConfig(k),ab=c('ReactComposerAttachmentStore').getIsAttachmentSelected(k,c('ReactComposerAttachmentType').AUDIENCE_SELECTOR);if(ab)za=c('ReactComposerAudienceSelectorStore').getAttachmentConfig(k);if(za===null){c('ifRequired')('ReactComposerCTAStore',function(sb){za=sb.getAttachmentConfig(k)});if(za===null)c('ifRequired')('ReactComposerCollectionStore',function(sb){za=sb.getAttachmentConfig(k)});}var bb=c('ReactComposerTaggerStore').hasMarkdown(k);c('ifRequired')('ReactComposerMarkdownStore',function(sb){bb=bb||sb.isMarkdownEnabled(k)});var cb=c('ifRequired')('ReactComposerPostToGroupStore',function(sb){return sb.getIsTabSelected(k)},function(){return false}),db=c('ReactComposerTaggerStore').getPoliticalDistrictInfo(k),eb=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').CONTENT_WARNINGS);if(eb!=null)eb=eb.map(function(sb){return sb.getUniqueID()});var fb=null;c('ifRequired')('ReactComposerTopicFeedsTaggerStore',function(sb){if(!sb.getIsDarkLaunch(k))fb=sb.getTaggedTopics(k).toArray();});var gb=null;c('ifRequired')('ReactComposerGroupPostTagsTaggerStore',function(sb){gb=sb.getPostTagIDs(k)});var hb=c('ReactComposerPromptsStore').getPromptData(k),ib=null;c('ifRequired')('ReactComposerCustomConfigStore',function(sb){ib=sb.isFeedOnlyPost(k)?[c('StorySurfaces').TIMELINE]:null});var jb=c('ReactComposerSessionMetricsStore').getComposerStartTime(k),kb=null;if(jb)kb=Math.round((Date.now()-jb)/1000);var lb=false;c('ifRequired')('ReactComposerProfileBadgeStore',function(sb){lb=sb.hasProfileBadge(k)});var mb=c('ComposerXMarauderLogger').getInstance(k),nb=mb&&mb.composerSourceSurface,ob=j.composerConfig.attachmentsConfig&&j.composerConfig.attachmentsConfig[c('ReactComposerAttachmentType').STATUS],pb=ob&&ob.richTextEditor,qb=false;if(ob&&ob.isWelcomeToGroupPost)qb=true;var rb=qa?null:c('ReactComposerAudienceStore').getAudience(k);return Object.assign(babelHelpers['extends']({},c('ReactComposerStatusStore').getRichTextBlocks(k),{action_type_id:u,album_id:qa,attachment:za,backdated_date:la,boosted_post_config:ya,audience:ra,charity_id:ia,composer_entry_time:c('ReactComposerSessionMetricsStore').getComposerEntryTime(k),composer_session_id:c('ReactComposerLoggingStore').getSessionID(k),composer_session_duration:kb,composer_source_surface:nb,composer_type:j.composerType,composertags_city:na,composertags_issues:r,composertags_place:ka&&ka.getUniqueID()||na,composertags_place_name:ka&&ka.getTitle(),composertags_with:n,composertags_sponsors:pa.sponsors,direct_share_status:pa.directShareStatus,sponsor_relationship:pa.sponsorRelationship,composertags_product_items:p,content_warnings:eb,feed_targeted_data:va,feed_topics:fb,fun_fact_prompt_id:ga,group_post_tag_ids:gb,hide_object_attachment:aa,icon_id:x,is_explicit_place:!!ka,is_markdown:bb,is_post_to_group:cb,is_welcome_to_group_post:qb,is_q_and_a:c('ReactComposerAttachmentStore').getIsAttachmentSelected(k,c('ReactComposerAttachmentType').QANDA),is_profile_badge_post:lb,political_district_info:db,multilingual_statuses:ca,multilingual_status_langs:da,multilingual_specified_lang:ea,num_keystrokes:c('ReactComposerSessionMetricsStore').getKeystrokeCount(k),num_pastes:c('ReactComposerSessionMetricsStore').getPasteCount(k),object_id:v,object_str:w,place_attachment_setting:ba,post_surfaces_blacklist:ib,privacyx:rb,prompt_id:hb?hb.promptID:null,prompt_tracking_string:hb?hb.trackingString:null,publisher_abtest_holdout:xa,ref:c('ReactComposerStore').getRef(k),xc_sticker_id:z,tagger_session_id:ja&&ja.sessionID,target_type:c('ReactComposerStore').getTargetType(k),targeted_privacy_data:wa,xhpc_message:c('ReactComposerStatusStore').getMessage(k,pb&&!bb),xhpc_message_text:c('ReactComposerStatusStore').getMessageText(k),is_forced_reshare_of_post:za&&za.reshare_original_post,xc_disable_config:{xc_disable_link:za&&za.readOnly}}),this._getScrapedAttachmentData(za),c('ReactComposerPostUtilsCore').getCoreData(k,j.composerConfig.contextInfo,l))},getMediaUploadsData:function i(j,k){var l=c('ReactComposerPhotoStore').getPhotos(j);k=k.filter(function(m){return m.mediaType===c('ReactComposerMediaUploadType').VIDEO?true:l.some(function(n){return n.id===m.photoID})});return this.getMediaDataWithoutFiltering(j,k)},getMediaDataWithoutFiltering:function i(j,k){var l=k.map(function(o){return o.photoID}).toArray(),m=c('ReactComposerSlideshowStore').isSlideshowSelected(j),n=null;if(m)n=this._getSlideshowSpec(j);return Object.assign({composer_unpublished_photo:l,qn:c('ReactComposerLoggingStore').getSessionID(j),slideshow_spec:n,waterfallxapp:c('PUWApplications').WEB_REACT_COMPOSER,xy_tags:this._getXYTagData(j)},this._getCreativeEditingToolsData(k))},_sanitizeDateField:function i(j){return !j||j===-1||j===0?null:j},_getSlideshowSpec:function i(j){var k=c('ReactComposerSlideshowAudioStore').getSelectedStorylineMood(j),l=null;if(k!=null)l=k.moodID;var m=c('ReactComposerSlideshowStore').getDurationInMS(j),n=c('ReactComposerSlideshowStore').getTransitionInMS(j),o=c('ReactComposerSelectedImagesStore').getNumberOfImages(j),p=c('SlideshowUtil').getTotalLengthInSec(m,o),q=c('SlideshowUtil').getDurationParam(o,p,n);return {photo_ids:c('ReactComposerSelectedImagesStore').getPhotoIDs(j),images_crops:c('ReactComposerSelectedImagesStore').getImagesCrops(j),photo_duration:q.durationInMS,photo_transition_duration:q.transitionInMS,storyline_mood_id:l}},_getXYTagData:function i(j){var k=c('ReactComposerPhotoStore').getAllTaggedFaceboxes(j).map(function(m){return {fbid:m.get('photoID'),x:m.get('x'),y:m.get('y'),name:m.get('taggedValue'),subject:m.get('taggedSubjectID'),from_facebox:true,source:m.get('isMagicTag')?'composerx_suggestions':'composerx_flyout'}}),l=c('ReactComposerPhotoStore').getAllXYTags(j).map(function(m){return {fbid:m.get('photoID'),x:m.get('x'),y:m.get('y'),name:m.get('name'),subject:m.get('subject'),from_facebox:m.get('from_facebox'),source:m.get('source')}});return k.concat(l)},_getCreativeEditingToolsData:function i(j){var k={},l={},m={},n={};j.forEach(function(p){var q=p.get('photoID'),r=c('PhotoEditorSaveStates').getLoggingData(p.get('originalPhotoID'));if(r){k[q]=r.hasFilter?true:null;l[q]=r.hasCrop?true:null;m[q]=r.textOverlays;n[q]=r.stickers}});var o={};o[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_HAS_FILTER]=k;o[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_HAS_CROP]=l;o[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_TEXT_OVERLAY]=m;o[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_STICKER]=n;return o},_getScrapedAttachmentData:function i(j){if(!j||!j.params||j.readOnly)return null;return {xc_share_params:JSON.stringify(j.params),xc_share_target_type:j.type,xc_share_images:j.params.images,xc_share_title:j.params.title,xc_share_summary:j.params.summary,xc_link_url:j.params.url}},createFormData:function i(j){var k={};Object.keys(j).forEach(function(n){if(j[n]!==undefined&&j[n]!==null){var o=j[n] instanceof Object;if(!o){k[n]=j[n]}else{var p=!Object.values(j[n]).every(function(q){return q===undefined||q===null});if(p)k[n]=j[n];}}});var l=new FormData(),m=c('flattenPHPQueryData')(k);Object.keys(m).forEach(function(n){l.append(n,m[n])});return l}};f.exports=h}),null);
__d("XComposerXMediaInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composerx\/intercept\/media\/",{xhpc_composerid:{type:"String",required:true},xhpc_message:{type:"String"},xhpc_targetid:{type:"Int"}})}),null);
__d("XComposerXMediaMarkdownInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composerx\/markdown_intercept\/media\/",{xhpc_composerid:{type:"String",required:true},markdown_enabled:{type:"Bool",defaultValue:false},xhpc_message:{type:"String"}})}),null);
__d("XComposerXStatusInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composerx\/intercept\/status\/",{xhpc_composerid:{type:"String",required:true},xhpc_message:{type:"String"},xhpc_targetid:{type:"Int"}})}),null);
__d("XComposerXStatusMarkdownInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composerx\/markdown_intercept\/status\/",{xhpc_composerid:{type:"String",required:true},markdown_enabled:{type:"Bool",defaultValue:false},xhpc_message:{type:"String"}})}),null);
__d("XGamesFindPlayersSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/find_players\/save\/",{})}),null);
__d("XGroupTaskSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/grouptask\/save\/",{})}),null);
__d("XMarketplaceCreatePostController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/marketplace\/create_post\/",{xhpc_composerid:{type:"String",required:true},xhpc_message:{type:"String"},xhpc_targetid:{type:"Int",required:true}})}),null);
__d("XRedEnvelopeSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/redenv\/save\/",{xhpc_targetid:{type:"Int",required:true},xhpc_composerid:{type:"String",required:true},composer_attachment_message:{type:"String"},distribution:{type:"String",required:true},total_amount:{type:"Int",required:true},number_of_envelopes:{type:"Int",required:true}})}),null);
__d("XSalesPromoCreateAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/sales_promo\/create\/",{availability_location:{type:"Enum",required:true,enumType:1},description:{type:"String",defaultValue:""},destination_uri:{type:"String",defaultValue:""},discount_code:{type:"String",defaultValue:""},expiration_time:{type:"Int",required:true},group_id:{type:"FBID"},owner_id:{type:"FBID",required:true},page_id:{type:"FBID"},photo_ids:{type:"FBIDVector"},referrer:{type:"String"},schedule_time:{type:"Int"},start_time:{type:"Int"},terms_and_conditions:{type:"String",defaultValue:""},use_boost:{type:"Bool",defaultValue:false},video_ids:{type:"FBIDVector"}})}),null);
__d("XVideoEditDialogSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/edit\/dialog\/save\/",{v:{type:"Int",required:true}})}),null);
__d('ReactComposerPostUtils',['invariant','ActorURI','Arbiter','ComposerEntryPointRef','DateConsts','HTML','ReactComposerActions','ReactComposerAsyncRequest','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerFileStore','ReactComposerMediaUploadStore','ReactComposerPhotoStore','ReactComposerPostDataUtils','ComposerPublisher','ReactComposerSlideshowStore','ReactComposerStatusStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerStore','ReactComposerVideoUploadStore','ReactComposerWorkFileStore','URI','VideoEditSource','XComposerXMediaInterceptController','XComposerXMediaMarkdownInterceptController','XComposerXStatusInterceptController','XComposerXStatusMarkdownInterceptController','XGamesFindPlayersSaveController','XGroupTaskSaveController','XMarketplaceCreatePostController','XRedEnvelopeSaveController','XRedEnvelopeCreationController','XVideoEditDialogSaveController','XSalesPromoCreateAsyncController','formatDate','ifRequired'],(function a(b,c,d,e,f,g,h){var i=c('ReactComposerWorkFileStore').module,j=!!i,k=i||c('ReactComposerFileStore'),l={publish:function m(n,o){c('ReactComposerActions').publishStarted(n);o=o||{};o.composer_id=n;if(o.streamNode){o.streamStory=o.streamNode}else if(o.streamMarkup)o.streamStory=c('HTML')(o.streamMarkup).getRootNode();if(o.contentID)o.matchData={content_id:o.contentID};c('Arbiter').inform('composer/publish',o)},isPostButtonDisabled:function m(n,o){var p=c('ReactComposerPhotoStore').isLimitExceeded(n,o),q=c('ReactComposerMediaUploadStore').isUploading(n),r=c('ReactComposerPhotoStore').isRecognizing(n),s=!!c('ReactComposerVideoUploadStore').getVideo(n)&&c('ReactComposerStore').isPosting(n),t=c('ReactComposerPhotoStore').isSphericalPhotoUpdating(n);return p||q||r||s||t},post:function m(n){var o,p,q;!!n.actorID||h(0);!!n.composerConfig||h(0);!!n.composerConfig.contextInfo||h(0);!!n.composerID||h(0);!!n.targetID||h(0);var r=n.actorID,s=n.composerID,t=false,u=false,v=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').MEDIA),w=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').AUDIENCE_SELECTOR);v=v||w;var x=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').QANDA),y=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').FILE),z=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').QUESTION),aa=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').RED_ENVELOPE),ba=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').SELL)||c('ifRequired')('ReactComposerSellStore',function(bc){return bc.getInterceptSell(s)},function(){return false}),ca=false;c('ifRequired')('ReactComposerCTAAttachmentUtils',function(bc){ca=bc.isCTAAttachmentSelected(s)});var da=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').TASK),ea=c('ReactComposerSlideshowStore').isSlideshowSelected(s),fa=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').PROFILE_PIC_FRAME),ga=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').PLACE_LIST),ha=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').QA),ia=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').FIND_PLAYERS),ja=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').LEARNING_COURSE),ka=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').PAGE_RECOMMENDATION),la=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').TOPIC_DISCUSSION),ma=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').MEDIA_EFFECT_SHARE),na=c('ReactComposerAttachmentStore').getIsAttachmentSelected(s,c('ReactComposerAttachmentType').SALES_PROMO),oa=n.composerConfig.attachmentsConfig||{},pa=oa[c('ReactComposerAttachmentType').STATUS]||{},qa=c('ifRequired')('ReactComposerSellStore',function(bc){return bc.showURLIntercept(s)},function(){return false}),ra=pa.attemptIntercept&&pa.sellIntercept&&!ba&&!qa,sa=c('ReactComposerPostDataUtils').getPostData(n);c('ifRequired')('ReactComposerStatusDonateButtonStore',function(bc){if(bc.getEnabled(s))Object.assign(sa,{cta_data:{type:'DONATE',value:{fundraiser_campaign_id:bc.getFundraiserCampaignID(s),link_title:bc.getTitle(s),link_description:bc.getDescription(s)}}});});c('ifRequired')('ReactComposerCTAStore',function(bc){var cc=bc.getCTAData(s);if(cc&&cc.type==='MESSAGE_PAGE')Object.assign(sa,{cta_data:cc});});var ta=c('ReactComposerVideoUploadStore').getVideo(s);if(v&&!!ta){var ua=c('ReactComposerVideoUploadStore').getUploader(s);ua&&ua.uploadFromFile(ta.file,sa);return}var va=j?k.hasFile(s):k.isFileSelected(s),wa,xa=c('ReactComposerPhotoStore').getPhotos(s),ya=c('ReactComposerMediaUploadStore').getUploads(s);c('ifRequired')('ReactComposerFormattedTextStore',function(bc){var cc=bc.getTextFormatPresetID(s);if(cc)Object.assign(sa,{text_format_preset_id:cc});});c('ifRequired')('ReactComposerPromptsStore',function(bc){var cc=bc.getMemeCategoryID(s);if(cc)Object.assign(sa,{meme_category_id:cc});});if(ba){c('ifRequired')('ReactComposerSellStore',function(bc){Object.assign(sa,{composer_attachment_sell_title:bc.getTitleText(s),composer_attachment_sell_price:bc.getPrice(s),composer_attachment_sell_price_type:bc.getPriceType(s),composer_attachment_sell_currency:bc.getCurrency(s),composer_attachment_sell_quantity:bc.getQuantity(s),composer_attachment_sell_condition:bc.getConditionID(s),composer_attachment_sell_category:bc.getCategoryID(s),composer_attachment_sell_location_page_id:bc.getLocationID(s),composer_attachment_sell_pickup_note:bc.getPickupNoteText(s),post_to_marketplace:bc.isNearbyLocationChecked(s),cross_post_checked:bc.isCrossPostChecked(s),composer_attachment_sell_audience_target_ids:Array.from(bc.getAudienceTargetIDs(s)).join(',')})});c('ifRequired')('ReactComposerAutosSellStore.react',function(bc){Object.assign(sa,{composer_attachment_sell_serialized_verticals_data:bc.getSerializedVerticalData(s)})})}if(ca)c('ifRequired')('ReactComposerCTAStore',function(bc){Object.assign(sa,{cta_data:bc.getCTAData(s)})});if(ga)c('ifRequired')('ReactComposerPlaceListStore.react',function(bc){Object.assign(sa,{is_placelist_post:true,placelist_within_page:bc.getPageID(s),should_redirect_place_list_on_create:bc.getShouldRedirectOnCreate(s)});if(bc.getGroupID(s))Object.assign(sa,{target_id:bc.getGroupID(s),xhpc_targetid:bc.getGroupID(s)});});if(ka)c('ifRequired')('ReactComposerPageRecommendationStore.react',function(bc){Object.assign(sa,{page_recommendation_ids:[bc.getPageID(s)]})});var za=ya.size>0,ab=v||x||ba||ja||da,bb=ea||ab&&za,cb=c('ifRequired')('PagesComposerBoostedPostsStore',function(bc){return bc.getConfig(s)},function(){return null}),db=sa.blocks,eb=pa.attemptMarkdownIntercept&&!ba&&!db;c('ifRequired')('ReactComposerMarkdownStore',function(bc){eb=eb&&!bc.interceptAttempted(s)});var fb=c('ifRequired')('ReactComposerSellStore',function(bc){return bc.getPostDirectlyToMarketplace(s)},function(){return false}),gb=null;if(z||ha){var hb=c('ReactComposerStore').getRef(s);switch(hb){case c('ComposerEntryPointRef').GROUP:gb='group';break;case c('ComposerEntryPointRef').EVENT:case c('ComposerEntryPointRef').EVENT_ABOUT:gb='event';break;case c('ComposerEntryPointRef').PAGES_FEED:gb='composer';break;default:gb=hb;}}if(bb){if(ra){wa=c('XComposerXMediaInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(s)).setString('xhpc_composerid',n.composerID).setInt('xhpc_targetid',n.targetID).getURI()}else if(eb){wa=c('XComposerXMediaMarkdownInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(s)).setString('xhpc_composerid',n.composerID).setBool('markdown_enabled',sa.is_markdown).getURI()}else if(fb){wa=c('XMarketplaceCreatePostController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(s)).setString('xhpc_composerid',n.composerID).setInt('xhpc_targetid',n.targetID).getURI()}else{u=c('ComposerPublisher').getShouldUseGraphQLForMedia(sa);wa=new (c('URI'))('/media/upload/photos/composer/')}var ib=c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya);Object.assign(sa,ib)}else if(y&&va){var jb=j||typeof k.getDropboxFileID!=='function'?null:k.getDropboxFileID(s);wa=new (c('URI'))(k.getURI(s));Object.assign(sa,{transaction_id:jb})}else if(z){wa=new (c('URI'))('/ajax/questions/save.php');c('ifRequired')('ReactComposerQuestionStore',function(bc){var cc=bc.getOptionStrings(s),dc=bc.getOptionImageIndices(s);Object.assign(sa,{composerAttachmentQuestion:c('ReactComposerStatusStore').getMessage(s),question_options:cc,question_option_image_indices:dc,source:gb,create_eigenpoll:bc.canChooseMultiplePollOptions(s),anyone_add_options:bc.canAnyoneAddPollOptions(s)})});Object.assign(sa,c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya))}else if(aa){c('ifRequired')('ReactComposerRedEnvelopeStore',function(bc){Object.assign(sa,{composer_attachment_message:c('ReactComposerStatusStore').getMessageText(s),message:c('ReactComposerStatusStore').getMessage(s),type:bc.getType(s),theme:bc.getTheme(s),total_amount:bc.getTotalAmount(s),credential_id:bc.getCredentialId(s),distribution:bc.getDistribution(s),number_of_envelopes:bc.getNumberOfEnvelopes(s)})});if(sa.type==='v1'){wa=c('XRedEnvelopeSaveController').getURIBuilder().setString('composer_attachment_message',sa.composer_attachment_message).setString('distribution',sa.distribution).setInt('total_amount',sa.total_amount*100).setInt('number_of_envelopes',sa.number_of_envelopes).setInt('xhpc_targetid',n.targetID).setString('xhpc_composerid',n.composerID).getURI()}else{var kb=c('ReactComposerTaggerStore').getTaggerData(s,c('ReactComposerTaggerType').PEOPLE),lb=kb.map(function(bc){return bc.getUniqueID()});wa=c('XRedEnvelopeCreationController').getURIBuilder().setString('message',sa.composer_attachment_message).setInt('amount',sa.total_amount*100).setInt('credential_id',sa.credentialID).setInt('photo_id',sa.theme).setInt('target_id',n.targetID).setFBIDVector('tagged_ids',lb).getURI()}}else if(ba){wa=new (c('URI'))('/ajax/groups/sell/save.php')}else if(fa){var mb=void 0,nb=void 0;c('ifRequired')('ReactComposerProfilePictureFrameStore',function(bc){mb=bc.getSelectedOverlayID(s);nb=bc.getScheduledPostDate(s);ib=c('ReactComposerPostDataUtils').getMediaDataWithoutFiltering(s,bc.getCroppedPhotoForUpload(s))});var ob=void 0,pb=void 0,qb=void 0,rb=false;if(nb){ob=c('formatDate')(nb,'m/d/Y',{skipPatternLocalization:true});var sb=nb.getHours()*c('DateConsts').MIN_PER_HOUR+nb.getMinutes();pb=c('DateConsts').SEC_PER_MIN*sb;qb=nb.getTime()/1000;rb=true}wa=new (c('URI'))('/media/upload/photos/composer/');Object.assign(sa,babelHelpers['extends']({},ib,{scheduled:rb,sticker_id:mb,future_date:ob,future_time:pb,scheduled_publish_time:qb}))}else if(la){c('ifRequired')('ReactComposerGroupTopicDiscussionStore',function(bc){wa=new (c('URI'))('/group_topic_discussion/save/');Object.assign(sa,{composer_topic_title:bc.getTitle(s),composer_topic_description:bc.getDescription(s)})})}else if(ha){c('ifRequired')('ReactComposerGroupQAStore',function(bc){wa=new (c('URI'))('/group_qa/save/');Object.assign(sa,{composer_question_title:bc.getTitle(s),composer_question_description:bc.getDescription(s),source:gb})});Object.assign(sa,c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya))}else if(na){c('ifRequired')('ReactComposerSalesPromoStore',function(bc){Object.assign(sa,{availability_location:bc.getAvailabilityLocation(s),description:bc.getDescription(s),destination_uri:bc.getDestinationURI(s),discount_code:bc.getDiscountCode(s),expiration_time:bc.getExpirationTime(s),photo_ids:c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya).composer_unpublished_photo,terms_and_conditions:bc.getTermsAndConditions(s)})});wa=c('XSalesPromoCreateAsyncController').getURIBuilder().setEnum('availability_location',sa.availability_location).setString('description',sa.description).setString('destination_uri',sa.destination_uri).setString('discount_code',sa.discount_code).setInt('expiration_time',sa.expiration_time).setFBID('group_id',n.targetID).setFBID('owner_id',r).setFBIDVector('photo_ids',sa.photo_ids).setString('referrer','www_group_composer').setString('terms_and_conditions',sa.terms_and_conditions).getURI();Object.assign(sa,c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya))}else if(ia){c('ifRequired')('ReactComposerFindPlayersStore',function(bc){wa=new (c('URI'))(c('XGamesFindPlayersSaveController').getURIBuilder().getURI());Object.assign(sa,{composer_find_players_title:bc.getTitle(s),composer_find_players_tags:bc.getTags(s),composer_find_players_name:bc.getName(s),composer_find_players_description:c('ReactComposerStatusStore').getMessage(s),photo_ids:c('ReactComposerPostDataUtils').getMediaUploadsData(s,ya).composer_unpublished_photo})})}else if(ma){(function(){var bc=void 0,cc=true;c('ifRequired')('ReactComposerMediaEffectShareStore',function(dc){ib=c('ReactComposerPostDataUtils').getMediaDataWithoutFiltering(s,dc.getEffectPhotoForUpload(s));var ec=dc.getComposerData(s).effectStatus;bc=dc.getEffectToApply(s);if(ec==='active')cc=false;var fc=dc.getUploadedVideoID(s);if(fc){Object.assign(sa,{draft:cc});dc.postVideo(s,sa);return}});wa=new (c('URI'))('/media/upload/photos/composer/');Object.assign(sa,babelHelpers['extends']({},ib,{scheduled:false,sticker_id:bc,draft:cc}))})()}else if(sa.attachment&&sa.attachment.params.canvas_video){(function(){wa=c('XVideoEditDialogSaveController').getURIBuilder().setInt('v',sa.attachment.params.canvas_video.video_id).getURI();var bc=c('ifRequired')('PagesComposerUnpublishedPostsStore',function(ec){return ec.getScheduledPublishTime(n.composerID)},function(){return null});bc=bc?Math.round(bc.getTime()/1000):null;var cc=bc===null&&!sa.draft;Object.assign(sa,sa.attachment.params.canvas_video);Object.assign(sa,{description:sa.xhpc_message,is_canvas_video:true,publish:cc,scheduled_publish_time:bc,source:c('VideoEditSource').PAGE_VIDEO_LPP_PUBLISH});var dc={content_id:sa.attachment.params.canvas_video.video_id,event:'publish',is_old_composer:false,scraped_url:sa.attachment.params.url,target_id:n.targetID};c('ifRequired')('PagesComposerActionsLogger',function(ec){ec.log(dc)})})()}else if(sa.attachment&&sa.attachment.params.carousel_video_lpp){(function(){wa=c('XVideoEditDialogSaveController').getURIBuilder().setInt('v',sa.attachment.params.carousel_video_lpp.video_id).getURI();var bc=c('ifRequired')('PagesComposerUnpublishedPostsStore',function(ec){return ec.getScheduledPublishTime(n.composerID)},function(){return null});bc=bc?Math.round(bc.getTime()/1000):null;var cc=bc===null&&!sa.draft;Object.assign(sa,sa.attachment.params.carousel_video_lpp);Object.assign(sa,{description:sa.xhpc_message,scheduled_publish_time:bc,publish:cc,source:c('VideoEditSource').PAGE_VIDEO_LPP_PUBLISH});var dc={child_attachments:sa.attachment.params.child_attachments,event:'publish',target_id:n.targetID,content_id:sa.attachment.params.carousel_video_lpp.video_id,is_old_composer:false,scraped_url:sa.attachment.params.url};c('ifRequired')('PagesComposerActionsLogger',function(ec){ec.log(dc)})})()}else if(ra){wa=c('XComposerXStatusInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(s)).setString('xhpc_composerid',n.composerID).setInt('xhpc_targetid',n.targetID).getURI()}else if(eb){wa=c('XComposerXStatusMarkdownInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(s)).setString('xhpc_composerid',n.composerID).setBool('markdown_enabled',sa.is_markdown).getURI();if(n.composerConfig.attachmentsConfig)if(n.composerConfig.attachmentsConfig[c('ReactComposerAttachmentType').STATUS])n.composerConfig.attachmentsConfig[c('ReactComposerAttachmentType').STATUS].defaultMarkdownOn=sa.is_markdown;}else{t=c('ComposerPublisher').getShouldUseGraphQLForStatus(sa);wa=new (c('URI'))('/ajax/updatestatus.php')}if(ja)c('ifRequired')('ReactComposerGroupLearningCourseStore',function(bc){Object.assign(sa,{xhpc_composerid:s,xhpc_targetid:bc.getGroupID(s),target_id:bc.getGroupID(s),xhpc_learning_course:true,module_name:bc.getModuleName(s),xhpc_unit_id:bc.getUnitID(s)})});if(da){wa=c('XGroupTaskSaveController').getURIBuilder().getURI();c('ifRequired')('ReactComposerTaskStore',function(bc){Object.assign(sa,bc.getTaskData(s));c('ifRequired')('GroupTaskLoggedAction',function(cc){Object.assign(sa,{action_to_be_logged:cc.CREATE_TASK})})})}var tb=n.composerConfig.pagePremadePostData;if(tb)Object.assign(sa,{page_premade_post:tb});c('ifRequired')('ReactComposerWorkOnboardingStore',function(bc){if(bc.isBotResponseEnabled(s))Object.assign(sa,{work_bot_response:true});});var ub=c('ReactComposerAttachmentStore').getAttachment(s,c('ReactComposerAttachmentType').LEARNING_COURSE);if(y&&ub){var vb=new (c('URI'))(window.location.href).getQueryData().filter,wb=k.getSelectedFileName(s);if(vb)Object.assign(sa,{xhpc_unit_id:vb,xhpc_learning_course:true,module_name:wb?wb:'New file'});}var xb=false;c('ifRequired')('ReactComposerVideoXEditDialogStore',function(bc){var cc;xb=bc.hasSelectedCustomThumbnails(n.composerID);if(xb)(function(){var dc=ya.map(function(wc){return wc.id}),ec=bc.getThumbnailTypes(dc.toArray(),n.composerID),fc={};ya.forEach(function(wc){return fc[wc.id]=wc.photoID});var gc={};for(var hc=ec,ic=Array.isArray(hc),jc=0,hc=ic?hc:hc[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var kc;if(ic){if(jc>=hc.length)break;kc=hc[jc++]}else{jc=hc.next();if(jc.done)break;kc=jc.value}var lc=kc,mc=lc[0],nc=lc[1];gc[fc[mc]]=nc}Object.assign(sa,{thumb_types:gc});var oc=bc.getUploadsWithTextOnThumbnail(dc.toArray(),n.composerID),pc=[];for(var qc=oc,rc=Array.isArray(qc),sc=0,qc=rc?qc:qc[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var tc;if(rc){if(sc>=qc.length)break;tc=qc[sc++]}else{sc=qc.next();if(sc.done)break;tc=sc.value}var uc=tc;pc=pc.concat(fc[uc])}Object.assign(sa,{videos_with_text_thumbnails:pc});var vc=c('ReactComposerPostDataUtils').createFormData(sa);bc.getThumbnails(dc.toArray(),n.composerID).then(function(wc){wc.forEach(function(zc){vc.append('thumb'+fc[zc[0]],zc[1])});if(y&&k.hasFile(s)){var xc=k.getFile(s);vc.append('file1',xc)}wa=c('ActorURI').create(wa,r);var yc=new (c('ReactComposerAsyncRequest'))(n.composerID,wa).setRawData(vc).setHandler(n.onPostSuccess).setErrorHandler(n.onPostFailure);yc.send()}).done()})();});if(t||u){c('ComposerPublisher').publish(r,sa);return}if(!xb){wa=c('ActorURI').create(wa,r);var yb=new (c('ReactComposerAsyncRequest'))(n.composerID,wa).setData(sa).setHandler(n.onPostSuccess).setErrorHandler(n.onPostFailure);if(y&&k.hasFile(s)){var zb=k.getFile(s),ac=new FormData();ac.append('file1',zb);yb.setRawData(ac)}yb.send()}}};f.exports=l}),null);
__d("CommerceProductTaggerType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"none",SHOP_PAGE:"shop_page",NON_SHOP_PAGE:"non_shop_page",INFLUENCER_PAGE:"influencer_page"})}),null);
__d("PUWErrorCodes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904})}),null);
__d('Emscripten',[],(function a(b,c,d,e,f,g){f.exports={isSupported:function h(){return typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set}}}),null);
__d('PooledWebWorker',['WebWorker'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('WebWorker'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this,m);this.$PooledWebWorker1=l;this.$PooledWebWorker2=k}j.prototype.getIndex=function(){'use strict';return this.$PooledWebWorker1};j.prototype.getPool=function(){'use strict';return this.$PooledWebWorker2};f.exports=j}),null);
__d('WebWorkerPool',['PooledWebWorker','emptyFunction'],(function a(b,c,d,e,f,g){h.isSupported=function(){'use strict';return c('PooledWebWorker').isSupported()};function h(i,j){'use strict';this.$WebWorkerPool1=[];for(var k=0;k<j;k++)this.$WebWorkerPool1.push(new (c('PooledWebWorker'))(this,k,i).setErrorHandler(this.$WebWorkerPool2).setMessageHandler(this.$WebWorkerPool3).execute());this.$WebWorkerPool4=0}h.prototype.setMessageHandler=function(i){'use strict';this.$WebWorkerPool5=i||c('emptyFunction');return this};h.prototype.setAllowCrossPageTransition=function(i){'use strict';this.$WebWorkerPool1.forEach(function(j){return j.setAllowCrossPageTransition(i)});return this};h.prototype.setErrorHandler=function(i){'use strict';this.$WebWorkerPool6=i||c('emptyFunction');return this};h.prototype.postMessage=function(){'use strict';var i=this.getWorker();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];i.postMessage.apply(i,k);return i};h.prototype.$WebWorkerPool3=function(){'use strict';for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);this.getPool().$WebWorkerPool5.apply(this.getPool(),j)};h.prototype.$WebWorkerPool2=function(){'use strict';for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);return this.getPool().$WebWorkerPool6.apply(this.getPool(),j)};h.prototype.getWorker=function(){'use strict';var i=this.$WebWorkerPool1[this.$WebWorkerPool4];this.$WebWorkerPool4=(this.$WebWorkerPool4+1)%this.$WebWorkerPool1.length;return i};f.exports=h}),null);
__d('JpegResizer',['Emscripten','JpegResizerConfig','JpegResizeWorkerResource','PUWErrorCodes','WebWorker','WebWorkerPool'],(function a(b,c,d,e,f,g){var h=null;i.isSupported=function(){'use strict';return c('WebWorkerPool').isSupported()&&c('Emscripten').isSupported()&&!c('JpegResizerConfig').isGKBlacklisted};i.getSingleton=function(j){'use strict';if(!h)h=new i(j||i.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return h};i.prepareResource=function(j){'use strict';c('WebWorker').prepareResource(c('JpegResizeWorkerResource'),j)};function i(j){'use strict';j=j||i.DEFAULT_POOL_SIZE;c('WebWorker').prepareResource(c('JpegResizeWorkerResource'));this.$JpegResizer1=new (c('WebWorkerPool'))(c('JpegResizeWorkerResource'),j).setErrorHandler(this.$JpegResizer2.bind(this)).setMessageHandler(this.$JpegResizer3.bind(this));this.$JpegResizer4={};this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH}i.prototype.setHighQuality=function(j){'use strict';if(j){this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH}else{this.$JpegResizer5=i.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer6=i.LOW_QUALITY_RESIZE_WIDTH}return this};i.prototype.setAllowCrossPageTransition=function(j){'use strict';this.$JpegResizer1.setAllowCrossPageTransition(j);return this};i.prototype.resizeBlob=function(j,k,l){'use strict';return this.$JpegResizer7(j,this.$JpegResizer6,this.$JpegResizer5,k,l)};i.prototype.resize360Blob=function(j,k,l,m){'use strict';var n=this.$JpegResizer6*3,o=this.$JpegResizer5*3;if(m){n=m;o=m}return this.$JpegResizer7(j,n,o,k,l)};i.prototype.$JpegResizer7=function(j,k,l,m,n){'use strict';var o=this.$JpegResizer1.getWorker();if(o.isCurrentState('terminated')){var p=new Error('Worker terminated');p.code=c('PUWErrorCodes').WORKER_TERMINATED;m(p);return this}var q=o.postMessage({blob:j,height:l,width:k}).getIndex();this.$JpegResizer8(q).unshift({done:m,progress:n});return this};i.prototype.$JpegResizer8=function(j){'use strict';if(!Object.prototype.hasOwnProperty.call(this.$JpegResizer4,j))this.$JpegResizer4[j]=[];return this.$JpegResizer4[j]};i.prototype.$JpegResizer2=function(j,k){'use strict';j.terminate();var l=this.$JpegResizer8(j.getIndex());this.$JpegResizer9(k);l.forEach(function(m){return m.done(k)});l.length=0};i.prototype.$JpegResizer3=function(j,k){'use strict';if(k.error)this.$JpegResizer9(k.error);if(k.done){this.$JpegResizer8(j.getIndex()).pop().done(k.error,k.blob,k.skipped)}else{var l=this.$JpegResizer8(j.getIndex()),m=l[l.length-1].progress;if(m)m({written:k.written,total:k.total});}};i.prototype.$JpegResizer9=function(j){'use strict';var k=j.message;if(k&&k.indexOf('Not a JPEG file')!==-1){j.code=c('PUWErrorCodes').BAD_JPEG}else if(k&&k.indexOf('abort()')!==-1){j.code=c('PUWErrorCodes').WORKER_ABORT}else j.code=c('PUWErrorCodes').UNKNOWN_RESIZE_ERROR;};i.DEFAULT_POOL_SIZE=3;i.DEFAULT_RESIZE_HEIGHT=2048;i.DEFAULT_RESIZE_WIDTH=2048;i.LOW_QUALITY_RESIZE_HEIGHT=960;i.LOW_QUALITY_RESIZE_WIDTH=960;f.exports=i}),null);